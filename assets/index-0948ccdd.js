(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function qe(){}const vn=e=>e;function Wn(e){return e()}function Nn(){return Object.create(null)}function ft(e){e.forEach(Wn)}function un(e){return typeof e=="function"}function al(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ul(e){return Object.keys(e).length===0}function An(e){return e??""}const Hn=typeof window<"u";let Qn=Hn?()=>window.performance.now():()=>Date.now(),yn=Hn?e=>requestAnimationFrame(e):qe;const Mt=new Set;function $n(e){Mt.forEach(t=>{t.c(e)||(Mt.delete(t),t.f())}),Mt.size!==0&&yn($n)}function xn(e){let t;return Mt.size===0&&yn($n),{promise:new Promise(n=>{Mt.add(t={c:e,f:n})}),abort(){Mt.delete(t)}}}function a(e,t){e.appendChild(t)}function el(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function fl(e){const t=p("style");return cl(el(e),t),t.sheet}function cl(e,t){return a(e.head||e,t),t.sheet}function ke(e,t,n){e.insertBefore(t,n||null)}function pe(e){e.parentNode&&e.parentNode.removeChild(e)}function $e(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function L(e){return document.createTextNode(e)}function D(){return L(" ")}function tl(){return L("")}function b(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function i(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function nn(e){return e===""?null:+e}function _l(e){return Array.from(e.childNodes)}function Qe(e,t){t=""+t,e.data!==t&&(e.data=t)}function Nt(e,t){e.value=t??""}function v(e,t,n,l){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,l?"important":"")}function xt(e,t,n){for(let l=0;l<e.options.length;l+=1){const o=e.options[l];if(o.__value===t){o.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Cn(e){const t=e.querySelector(":checked");return t&&t.__value}function X(e,t,n){e.classList[n?"add":"remove"](t)}function pl(e,t,{bubbles:n=!1,cancelable:l=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,l,t),o}const on=new Map;let sn=0;function dl(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function hl(e,t){const n={stylesheet:fl(t),rules:{}};return on.set(e,n),n}function nl(e,t,n,l,o,u,f,d=0){const K=16.666/l;let y=`{
`;for(let m=0;m<=1;m+=K){const E=t+(n-t)*u(m);y+=m*100+`%{${f(E,1-E)}}
`}const M=y+`100% {${f(n,1-n)}}
}`,k=`__svelte_${dl(M)}_${d}`,B=el(e),{stylesheet:S,rules:N}=on.get(B)||hl(B,e);N[k]||(N[k]=!0,S.insertRule(`@keyframes ${k} ${M}`,S.cssRules.length));const C=e.style.animation||"";return e.style.animation=`${C?`${C}, `:""}${k} ${l}ms linear ${o}ms 1 both`,sn+=1,k}function dn(e,t){const n=(e.style.animation||"").split(", "),l=n.filter(t?u=>u.indexOf(t)<0:u=>u.indexOf("__svelte")===-1),o=n.length-l.length;o&&(e.style.animation=l.join(", "),sn-=o,sn||gl())}function gl(){yn(()=>{sn||(on.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&pe(t)}),on.clear())})}let wn;function It(e){wn=e}const Ct=[],Mn=[];let St=[];const Sn=[],ml=Promise.resolve();let hn=!1;function vl(){hn||(hn=!0,ml.then(ll))}function Xe(e){St.push(e)}const _n=new Set;let At=0;function ll(){if(At!==0)return;const e=wn;do{try{for(;At<Ct.length;){const t=Ct[At];At++,It(t),yl(t.$$)}}catch(t){throw Ct.length=0,At=0,t}for(It(null),Ct.length=0,At=0;Mn.length;)Mn.pop()();for(let t=0;t<St.length;t+=1){const n=St[t];_n.has(n)||(_n.add(n),n())}St.length=0}while(Ct.length);for(;Sn.length;)Sn.pop()();hn=!1,_n.clear(),It(e)}function yl(e){if(e.fragment!==null){e.update(),ft(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Xe)}}function wl(e){const t=[],n=[];St.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),St=t}let jt;function ol(){return jt||(jt=Promise.resolve(),jt.then(()=>{jt=null})),jt}function rn(e,t,n){e.dispatchEvent(pl(`${t?"intro":"outro"}${n}`))}const ln=new Set;let xe;function bl(){xe={r:0,c:[],p:xe}}function kl(){xe.r||ft(xe.c),xe=xe.p}function gn(e,t){e&&e.i&&(ln.delete(e),e.i(t))}function On(e,t,n,l){if(e&&e.o){if(ln.has(e))return;ln.add(e),xe.c.push(()=>{ln.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}const il={duration:0};function sl(e,t,n){const l={direction:"in"};let o=t(e,n,l),u=!1,f,d,K=0;function y(){f&&dn(e,f)}function M(){const{delay:B=0,duration:S=300,easing:N=vn,tick:C=qe,css:m}=o||il;m&&(f=nl(e,0,1,S,B,N,m,K++)),C(0,1);const E=Qn()+B,de=E+S;d&&d.abort(),u=!0,Xe(()=>rn(e,!0,"start")),d=xn(Re=>{if(u){if(Re>=de)return C(1,0),rn(e,!0,"end"),y(),u=!1;if(Re>=E){const Ke=N((Re-E)/S);C(Ke,1-Ke)}}return u})}let k=!1;return{start(){k||(k=!0,dn(e),un(o)?(o=o(l),ol().then(M)):M())},invalidate(){k=!1},end(){u&&(y(),u=!1)}}}function rl(e,t,n){const l={direction:"out"};let o=t(e,n,l),u=!0,f;const d=xe;d.r+=1;function K(){const{delay:y=0,duration:M=300,easing:k=vn,tick:B=qe,css:S}=o||il;S&&(f=nl(e,1,0,M,y,k,S));const N=Qn()+y,C=N+M;Xe(()=>rn(e,!1,"start")),xn(m=>{if(u){if(m>=C)return B(0,1),rn(e,!1,"end"),--d.r||ft(d.c),!1;if(m>=N){const E=k((m-N)/M);B(1-E,E)}}return u})}return un(o)?ol().then(()=>{o=o(l),K()}):K(),{end(y){y&&o.tick&&o.tick(1,0),u&&(f&&dn(e,f),u=!1)}}}function Kl(e,t,n,l){const{fragment:o,after_update:u}=e.$$;o&&o.m(t,n),l||Xe(()=>{const f=e.$$.on_mount.map(Wn).filter(un);e.$$.on_destroy?e.$$.on_destroy.push(...f):ft(f),e.$$.on_mount=[]}),u.forEach(Xe)}function Dl(e,t){const n=e.$$;n.fragment!==null&&(wl(n.after_update),ft(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function El(e,t){e.$$.dirty[0]===-1&&(Ct.push(e),vl(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Nl(e,t,n,l,o,u,f,d=[-1]){const K=wn;It(e);const y=e.$$={fragment:null,ctx:[],props:u,update:qe,not_equal:o,bound:Nn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(K?K.$$.context:[])),callbacks:Nn(),dirty:d,skip_bound:!1,root:t.target||K.$$.root};f&&f(y.root);let M=!1;if(y.ctx=n?n(e,t.props||{},(k,B,...S)=>{const N=S.length?S[0]:B;return y.ctx&&o(y.ctx[k],y.ctx[k]=N)&&(!y.skip_bound&&y.bound[k]&&y.bound[k](N),M&&El(e,k)),B}):[],y.update(),M=!0,ft(y.before_update),y.fragment=l?l(y.ctx):!1,t.target){if(t.hydrate){const k=_l(t.target);y.fragment&&y.fragment.l(k),k.forEach(pe)}else y.fragment&&y.fragment.c();t.intro&&gn(e.$$.fragment),Kl(e,t.target,t.anchor,t.customElement),ll()}It(K)}class Al{$destroy(){Dl(this,1),this.$destroy=qe}$on(t,n){if(!un(n))return qe;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(t){this.$$set&&!ul(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function an(e,{delay:t=0,duration:n=400,easing:l=vn}={}){const o=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:l,css:u=>`opacity: ${u*o}`}}const Bt={"18p":{panel_num:18,panel_width:96,panel_height:96,panel_w_num:5,note_width:20,note_height:6,panel_top:[0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,3],panel_left:[0,1,2,3,4,.5,1.5,2.5,3.5,.5,1.5,2.5,3.5,0,1,2,3,4],colors:["#cccccc","#9999ff","#99ffff","#ffff99","#ff9966","#ffffff"],panel_color_def:[1,2,5,3,4,1,2,3,4,1,2,3,4,1,2,5,3,4],names:"7890-UIOPJKL;NM<>/".split(""),dos_chara:"aa,ab,ac,ad,ae,ba,bb,bc,bd,ca,cb,cc,cd,da,db,dc,dd,de".split(","),key_config:"Digit7,Digit8,Digit9,Digit0,Minus,KeyU,KeyI,KeyO,KeyP,KeyJ,KeyK,KeyL,Semicolon,KeyN,KeyM,Comma,Period,Slash".split(",")},"9t":{panel_num:9,panel_width:96,panel_height:96,panel_w_num:3,note_width:30,note_height:6,panel_top:[0,0,0,1,1,1,2,2,2],panel_left:[0,1,2,0,1,2,0,1,2],colors:["#cccccc","#9999ff","#ff9999","#99ff99"],panel_color_def:[1,1,1,2,3,2,1,1,1],names:"789456123".split(""),dos_chara:"left,down,up,right,space,sleft,sdown,sup,sright".split(","),key_config:"Numpad7,Numpad8,Numpad9,Numpad4,Numpad5,Numpad6,Numpad1,Numpad2,Numpad3".split(",")},"36p":{panel_num:36,panel_width:48,panel_height:48,panel_w_num:10,note_width:15,note_height:6,panel_top:[0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,3,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,3],panel_left:[0,1,2,3,4,.5,1.5,2.5,3.5,.5,1.5,2.5,3.5,0,1,2,3,4,5,6,7,8,9,5.5,6.5,7.5,8.5,5.5,6.5,7.5,8.5,5,6,7,8,9],colors:["#cccccc","#9999ff","#99ffff","#ffff99","#ff9966","#ffffff"],panel_color_def:[1,2,5,3,4,1,2,3,4,1,2,3,4,1,2,5,3,4,1,2,5,3,4,1,2,3,4,1,2,3,4,1,2,5,3,4],names:"23456WERTSDFGZXCVB7890-UIOPJKL;NM<>/".split(""),dos_chara:"aa,ab,ac,ad,ae,ba,bb,bc,bd,ca,cb,cc,cd,da,db,dc,dd,de,af,ag,ah,ai,aj,bf,bg,bh,bi,cf,cg,ch,ci,df,dg,dh,di,dj".split(","),key_config:"Digit2,Digit3,Digit4,Digit5,Digit6,KeyW,KeyE,KeyR,KeyT,KeyS,KeyD,KeyF,KeyG,KeyZ,KeyX,KeyC,KeyV,KeyB,Digit7,Digit8,Digit9,Digit0,Minus,KeyU,KeyI,KeyO,KeyP,KeyJ,KeyK,KeyL,Semicolon,KeyN,KeyM,Comma,Period,Slash".split(",")}};function Pn(e,t,n){const l=e.slice();return l[103]=t[n],l[105]=n,l}function Fn(e,t,n){const l=e.slice();return l[106]=t[n],l[108]=n,l}function Rn(e,t,n){const l=e.slice();return l[103]=t[n],l[105]=n,l}function Ln(e,t,n){const l=e.slice();return l[110]=t[n],l[108]=n,l}function Tn(e,t,n){const l=e.slice();return l[112]=t[n],l[105]=n,l}function jn(e,t,n){const l=e.slice();return l[114]=t[n],l}function Bn(e,t,n){const l=e.slice();return l[117]=t[n],l}function In(e,t,n){const l=e.slice();return l[110]=t[n],l}function Jn(e){let t,n=e[110]+"",l;return{c(){t=p("option"),l=L(n),i(t,"num",e[110]),t.__value=e[110],t.value=t.__value},m(o,u){ke(o,t,u),a(t,l)},p:qe,d(o){o&&pe(t)}}}function Vn(e){let t,n=e[117]+"",l;return{c(){t=p("option"),l=L(n),i(t,"ratio",e[117]),t.__value=e[117],t.value=t.__value},m(o,u){ke(o,t,u),a(t,l)},p:qe,d(o){o&&pe(t)}}}function Un(e){let t,n=`${e[0].panel_width-e[114]}px`,l=`${e[0].panel_height-e[114]}px`;return{c(){t=p("div"),i(t,"class","panel_back svelte-1vw65n4"),v(t,"width",n),v(t,"height",l),v(t,"background",e[0].colors[e[0].panel_color_def[e[105]]])},m(o,u){ke(o,t,u)},p(o,u){u[0]&8388609&&n!==(n=`${o[0].panel_width-o[114]}px`)&&v(t,"width",n),u[0]&8388609&&l!==(l=`${o[0].panel_height-o[114]}px`)&&v(t,"height",l),u[0]&1&&v(t,"background",o[0].colors[o[0].panel_color_def[o[105]]])},d(o){o&&pe(t)}}}function qn(e){let t,n,l,o=e[0].names[e[105]]+"",u,f,d=`${e[0].panel_width+1}px`,K=`${e[0].panel_height+1}px`,y=`${e[0].panel_top[e[105]]*e[0].panel_height}px`,M=`${e[0].panel_left[e[105]]*e[0].panel_width}px`,k,B,S=e[23][e[105]],N=[];for(let C=0;C<S.length;C+=1)N[C]=Un(jn(e,S,C));return{c(){t=p("div");for(let C=0;C<N.length;C+=1)N[C].c();n=D(),l=p("div"),u=L(o),f=D(),i(l,"class","svelte-1vw65n4"),i(t,"class","panel svelte-1vw65n4"),v(t,"width",d),v(t,"height",K),v(t,"top",y),v(t,"left",M),v(t,"background",e[24][e[105]])},m(C,m){ke(C,t,m);for(let E=0;E<N.length;E+=1)N[E]&&N[E].m(t,null);a(t,n),a(t,l),a(l,u),a(t,f),k||(B=b(t,"click",e[37](e[105])),k=!0)},p(C,m){if(e=C,m[0]&8388609){S=e[23][e[105]];let E;for(E=0;E<S.length;E+=1){const de=jn(e,S,E);N[E]?N[E].p(de,m):(N[E]=Un(de),N[E].c(),N[E].m(t,n))}for(;E<N.length;E+=1)N[E].d(1);N.length=S.length}m[0]&1&&o!==(o=e[0].names[e[105]]+"")&&Qe(u,o),m[0]&1&&d!==(d=`${e[0].panel_width+1}px`)&&v(t,"width",d),m[0]&1&&K!==(K=`${e[0].panel_height+1}px`)&&v(t,"height",K),m[0]&1&&y!==(y=`${e[0].panel_top[e[105]]*e[0].panel_height}px`)&&v(t,"top",y),m[0]&1&&M!==(M=`${e[0].panel_left[e[105]]*e[0].panel_width}px`)&&v(t,"left",M),m[0]&16777216&&v(t,"background",e[24][e[105]])},d(C){C&&pe(t),$e(N,C),k=!1,B()}}}function Xn(e){let t,n,l=`${e[0].note_width+1}px`,o=`${e[25]/e[2]*2/e[5]+1}px`,u=`${e[110]*2/e[5]}px`,f=`${e[105]*e[0].note_width}px`,d,K;function y(){return e[69](e[110])}return{c(){t=p("div"),i(t,"class",n=An(e[108]%(e[2]/4)==0?"grid4":"grid")+" svelte-1vw65n4"),v(t,"width",l),v(t,"height",o),v(t,"top",u),v(t,"left",f)},m(M,k){ke(M,t,k),d||(K=b(t,"click",y),d=!0)},p(M,k){e=M,k[0]&4&&n!==(n=An(e[108]%(e[2]/4)==0?"grid4":"grid")+" svelte-1vw65n4")&&i(t,"class",n),k[0]&1&&l!==(l=`${e[0].note_width+1}px`)&&v(t,"width",l),k[0]&36&&o!==(o=`${e[25]/e[2]*2/e[5]+1}px`)&&v(t,"height",o),k[0]&4194336&&u!==(u=`${e[110]*2/e[5]}px`)&&v(t,"top",u),k[0]&1&&f!==(f=`${e[105]*e[0].note_width}px`)&&v(t,"left",f)},d(M){M&&pe(t),d=!1,K()}}}function Yn(e){let t,n=e[22],l=[];for(let o=0;o<n.length;o+=1)l[o]=Xn(Ln(e,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();t=tl()},m(o,u){for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(o,u);ke(o,t,u)},p(o,u){if(u[0]&37749285|u[1]&1){n=o[22];let f;for(f=0;f<n.length;f+=1){const d=Ln(o,n,f);l[f]?l[f].p(d,u):(l[f]=Xn(d),l[f].c(),l[f].m(t.parentNode,t))}for(;f<l.length;f+=1)l[f].d(1);l.length=n.length}},d(o){$e(l,o),o&&pe(t)}}}function Zn(e){let t,n=`${e[16]*2/e[5]}px`,l=`${e[0].note_width*e[0].panel_num}px`;return{c(){t=p("div"),i(t,"class","cursor_play svelte-1vw65n4"),v(t,"top",n),v(t,"width",l)},m(o,u){ke(o,t,u)},p(o,u){u[0]&65568&&n!==(n=`${o[16]*2/o[5]}px`)&&v(t,"top",n),u[0]&1&&l!==(l=`${o[0].note_width*o[0].panel_num}px`)&&v(t,"width",l)},d(o){o&&pe(t)}}}function zn(e){let t,n=`${e[0].note_width+1}px`,l=`${e[0].note_height}px`,o=`${e[106]*2/e[5]-e[0].note_height/2}px`,u=`${e[105]*e[0].note_width}px`;return{c(){t=p("div"),i(t,"class","note svelte-1vw65n4"),v(t,"width",n),v(t,"height",l),v(t,"top",o),v(t,"left",u),v(t,"background",e[0].colors[e[0].panel_color_def[e[105]]])},m(f,d){ke(f,t,d)},p(f,d){d[0]&1&&n!==(n=`${f[0].note_width+1}px`)&&v(t,"width",n),d[0]&1&&l!==(l=`${f[0].note_height}px`)&&v(t,"height",l),d[0]&1048609&&o!==(o=`${f[106]*2/f[5]-f[0].note_height/2}px`)&&v(t,"top",o),d[0]&1&&u!==(u=`${f[105]*f[0].note_width}px`)&&v(t,"left",u),d[0]&1&&v(t,"background",f[0].colors[f[0].panel_color_def[f[105]]])},d(f){f&&pe(t)}}}function Gn(e){let t,n=e[103],l=[];for(let o=0;o<n.length;o+=1)l[o]=zn(Fn(e,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();t=tl()},m(o,u){for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(o,u);ke(o,t,u)},p(o,u){if(u[0]&1048609){n=o[103];let f;for(f=0;f<n.length;f+=1){const d=Fn(o,n,f);l[f]?l[f].p(d,u):(l[f]=zn(d),l[f].c(),l[f].m(t.parentNode,t))}for(;f<l.length;f+=1)l[f].d(1);l.length=n.length}},d(o){$e(l,o),o&&pe(t)}}}function Cl(e){let t,n,l,o;return{c(){t=p("div"),t.textContent="ページの途中にラベルがあるため曲再生が正常にできない可能性があります。",i(t,"class","message svelte-1vw65n4"),v(t,"background",e[28].warning)},m(u,f){ke(u,t,f),o=!0},p:qe,i(u){o||(Xe(()=>{o&&(l&&l.end(1),n=sl(t,an,{duration:100}),n.start())}),o=!0)},o(u){n&&n.invalidate(),l=rl(t,an,{duration:300}),o=!1},d(u){u&&pe(t),u&&l&&l.end()}}}function Ml(e){let t,n,l,o,u,f,d;return{c(){t=p("div"),n=L(e[13]),i(t,"class","message svelte-1vw65n4"),v(t,"background",e[14])},m(K,y){ke(K,t,y),a(t,n),u=!0,f||(d=b(t,"click",e[73]),f=!0)},p(K,y){(!u||y[0]&8192)&&Qe(n,K[13]),y[0]&16384&&v(t,"background",K[14])},i(K){u||(Xe(()=>{u&&(o&&o.end(1),l=sl(t,an,{duration:100}),l.start())}),u=!0)},o(K){l&&l.invalidate(),o=rl(t,an,{duration:300}),u=!1},d(K){K&&pe(t),K&&o&&o.end(),f=!1,d()}}}function Sl(e){let t,n,l,o=e[8]+1+"",u,f,d=(e[1]-e[8]*192)/(e[25]/e[2])+1+"",K,y,M,k,B=Math.round(e[19])+"",S,N,C,m,E,de,Re,Ke,Ot,ct,Pt,be,De,F,fn,G,Ee,R,Le,O,I,J,he,T,Y,et,g,W,V,se,_t,re,Ye,H,Te,ae,pt,Z,dt,z,Ze,ge,Ft,Se,ze,Q,je,ue,ht,Ne,Ae,me,Ge,Be,Jt,Oe,gt,Pe,Vt,Ce,Me,tt,Ut,$,nt,mt,Ie,lt=`${(e[1]-e[9]*e[25]*e[5])*2/e[5]}px`,ot=`${e[0].note_width*e[0].panel_num}px`,it,Rt=`${e[25]*2+10}px`,Lt,ve,qt,vt=e[17].toFixed(2)+"",Tt,Xt,ye,Yt,yt=e[18].toFixed(2)+"",st,Zt,we,zt,We,Gt,q,Je,Wt,Ve,Ht,Ue,Qt,r,c,h,A,x,Fe,ee,$t,rt,U,fe,bn,wt,at,kn,ut,j,cn,Kn,bt=e[26],te=[];for(let s=0;s<bt.length;s+=1)te[s]=Jn(In(e,bt,s));let kt=e[27],ne=[];for(let s=0;s<kt.length;s+=1)ne[s]=Vn(Bn(e,kt,s));let Kt=e[3],le=[];for(let s=0;s<Kt.length;s+=1)le[s]=qn(Tn(e,Kt,s));let Dt=e[20],oe=[];for(let s=0;s<Dt.length;s+=1)oe[s]=Yn(Rn(e,Dt,s));let ce=e[16]>=0&&Zn(e),Et=e[20],ie=[];for(let s=0;s<Et.length;s+=1)ie[s]=Gn(Pn(e,Et,s));const Dn=[Ml,Cl],He=[];function En(s,w){return s[13]!==""?0:s[21]?1:-1}return~(U=En(e))&&(fe=He[U]=Dn[U](e)),{c(){t=p("main"),n=p("div"),l=p("div"),u=L(o),f=L("小節目, "),K=L(d),y=L("/"),M=L(e[2]),k=L(" ("),S=L(B),N=L("f)"),C=D(),m=p("div"),E=p("input"),Re=D(),Ke=p("label"),Ke.textContent="この小節で設定変更",Ot=L(` |\r
      `),ct=p("label"),ct.textContent="開始フレーム:",Pt=D(),be=p("input"),De=D(),F=p("label"),F.textContent="BPM:",fn=D(),G=p("input"),Ee=L(` |\r
      `),R=p("input"),Le=D(),O=p("label"),O.textContent="パネル表示を逆転(R)",I=p("br"),J=L(`\r
      1ページの小節数\r
      `),he=p("select");for(let s=0;s<te.length;s+=1)te[s].c();T=L(`\r
      | パネル表示倍率\r
      `),Y=p("select");for(let s=0;s<ne.length;s+=1)ne[s].c();et=D(),g=p("div"),W=p("input"),V=D(),se=p("input"),_t=D(),re=p("input"),Ye=D(),H=p("input"),Te=D(),ae=p("input"),pt=D(),Z=p("input"),dt=D(),z=p("input"),Ze=D(),ge=p("input"),Ft=D(),Se=p("input"),ze=D(),Q=p("input"),je=D(),ue=p("input"),ht=D(),Ne=p("input"),Ae=D(),me=p("input"),Ge=D(),Be=p("input"),Jt=D(),Oe=p("input"),gt=D(),Pe=p("input"),Vt=D(),Ce=p("div"),Me=p("div");for(let s=0;s<le.length;s+=1)le[s].c();Ut=D(),$=p("div");for(let s=0;s<oe.length;s+=1)oe[s].c();nt=D(),ce&&ce.c(),mt=D(),Ie=p("div"),it=D();for(let s=0;s<ie.length;s+=1)ie[s].c();Lt=D(),ve=p("div"),qt=L("音量("),Tt=L(vt),Xt=L(`)\r
      `),ye=p("input"),Yt=L(`\r
      速度(`),st=L(yt),Zt=L(`)\r
      `),we=p("input"),zt=D(),We=p("div"),We.textContent="画面にファイルをドロップしてセーブデータ/音楽ファイルを読み込み",Gt=D(),q=p("div"),Je=p("input"),Wt=D(),Ve=p("input"),Ht=D(),Ue=p("input"),Qt=D(),r=p("input"),c=D(),h=p("input"),A=D(),x=p("input"),Fe=L(`\r
      譜面番号`),ee=p("input"),$t=D(),rt=p("div"),fe&&fe.c(),bn=D(),wt=p("footer"),at=p("a"),at.textContent="使用しているソフトウェアのライセンス表示",kn=L(` |\r
      `),ut=p("a"),ut.textContent=`Pun◇Pane Editor Ver.${mn}`,i(E,"type","checkbox"),E.checked=de=e[11]===e[8],i(E,"id","fix"),i(Ke,"for","fix"),i(Ke,"class","svelte-1vw65n4"),i(ct,"for","begin_frame"),i(ct,"class","svelte-1vw65n4"),i(be,"type","number"),be.value=e[10],i(be,"id","begin_frame"),i(be,"class","svelte-1vw65n4"),i(F,"for","bpm"),i(F,"class","svelte-1vw65n4"),i(G,"type","number"),G.value=e[7],i(G,"step","0.01"),i(G,"min","0.01"),i(G,"id","bpm"),i(G,"class","svelte-1vw65n4"),i(R,"type","checkbox"),i(R,"id","panel_reverse"),i(O,"for","panel_reverse"),i(O,"title","Rキー: カーソルより前のパネルを表示するか後のパネルを表示するかの切り替え"),i(O,"class","svelte-1vw65n4"),i(he,"class","svelte-1vw65n4"),e[5]===void 0&&Xe(()=>e[67].call(he)),i(Y,"class","svelte-1vw65n4"),e[6]===void 0&&Xe(()=>e[68].call(Y)),i(m,"class","main_input svelte-1vw65n4"),i(W,"type","button"),W.value="4",i(W,"title","1キー: カーソル移動間隔を4分に変更"),i(W,"class","svelte-1vw65n4"),X(W,"selected",e[2]===4),i(se,"type","button"),se.value="8",i(se,"title","2キー: カーソル移動間隔を8分に変更"),i(se,"class","svelte-1vw65n4"),X(se,"selected",e[2]===8),i(re,"type","button"),re.value="16",i(re,"title","3キー: カーソル移動間隔を16分に変更"),i(re,"class","svelte-1vw65n4"),X(re,"selected",e[2]===16),i(H,"type","button"),H.value="32",i(H,"title","Rキー: カーソル移動間隔を32分に変更"),i(H,"class","svelte-1vw65n4"),X(H,"selected",e[2]===32),i(ae,"type","button"),ae.value="12",i(ae,"title","4キー: カーソル移動間隔を12分(8分3連)に変更"),i(ae,"class","svelte-1vw65n4"),X(ae,"selected",e[2]===12),i(Z,"type","button"),Z.value="24",i(Z,"title","5キー: カーソル移動間隔を24分(16分3連)に変更"),i(Z,"class","svelte-1vw65n4"),X(Z,"selected",e[2]===24),i(z,"type","button"),z.value="48",i(z,"title","6キー: カーソル移動間隔を48分(32分3連)に変更"),i(z,"class","svelte-1vw65n4"),X(z,"selected",e[2]===48),i(ge,"type","button"),ge.value="←",i(ge,"title","左矢印キー: 前のページに移動"),i(ge,"class","svelte-1vw65n4"),i(Se,"type","button"),Se.value="↑",i(Se,"title","上矢印/E/B: カーソルを上に移動"),i(Se,"class","svelte-1vw65n4"),i(Q,"type","button"),Q.value="↓",i(Q,"title","下矢印/D/スペース: カーソルを下に移動"),i(Q,"class","svelte-1vw65n4"),i(ue,"type","button"),ue.value="→",i(ue,"title","右矢印キー: 次のページに移動"),i(ue,"class","svelte-1vw65n4"),i(Ne,"type","button"),Ne.value="BS",i(Ne,"title","Backspace: カーソルを前に移動してパネルを削除"),i(Ne,"class","svelte-1vw65n4"),i(me,"type","button"),me.value="Del",i(me,"title","Delete: カーソルのある行のパネルを削除"),i(me,"class","svelte-1vw65n4"),i(Be,"type","button"),Be.value="↶",i(Be,"title","Z: 元に戻す"),i(Be,"class","svelte-1vw65n4"),i(Oe,"type","button"),Oe.value="↷",i(Oe,"title","Y: やり直す"),i(Oe,"class","svelte-1vw65n4"),i(Pe,"type","button"),Pe.value="♪",i(Pe,"title","Enter: 曲再生の開始/停止"),i(Pe,"class","svelte-1vw65n4"),i(g,"class","main_buttons svelte-1vw65n4"),i(Me,"class","panels svelte-1vw65n4"),i(Me,"style",tt=`left: ${e[0].note_width*e[0].panel_num+20}px; width: ${e[0].panel_width*5}px;`),i(Ie,"class","cursor svelte-1vw65n4"),v(Ie,"top",lt),v(Ie,"width",ot),i($,"class","notes svelte-1vw65n4"),i(Ce,"class","punpane_editor svelte-1vw65n4"),v(Ce,"height",Rt),i(ye,"type","range"),i(ye,"min","0"),i(ye,"max","1"),i(ye,"step","0.01"),i(we,"type","range"),i(we,"min","0.1"),i(we,"max","1.5"),i(we,"step","0.1"),i(ve,"class","music_control svelte-1vw65n4"),i(We,"class","drop_area svelte-1vw65n4"),X(We,"dragover",e[15]),i(Je,"type","button"),Je.value="新規作成",i(Je,"title","編集中の譜面データを初期化します"),i(Je,"class","svelte-1vw65n4"),i(Ve,"type","button"),Ve.value="コピー(C)",i(Ve,"title","C: 現在のページ内容をクリップボードにコピーします。"),i(Ve,"class","svelte-1vw65n4"),i(Ue,"type","button"),Ue.value="カット(X)",i(Ue,"title","X: 現在のページ内容をクリップボードに切り取ります。"),i(Ue,"class","svelte-1vw65n4"),i(r,"type","button"),r.value="貼付/読込(V)",i(r,"title","V: コピーした内容を貼り付けます。クリップボードにセーブデータがある場合、それを読み込みます。"),i(r,"class","svelte-1vw65n4"),i(h,"type","button"),h.value="セーブ(S)",i(h,"title","S: セーブデータをクリップボードにコピーします。"),i(h,"class","svelte-1vw65n4"),i(x,"type","button"),x.value="dos出力(D)",i(x,"title","D: dosデータをクリップボードにコピーします。"),i(x,"class","svelte-1vw65n4"),i(ee,"type","number"),i(ee,"min","1"),i(ee,"class","svelte-1vw65n4"),i(q,"class","save_buttons svelte-1vw65n4"),i(rt,"class","message_container svelte-1vw65n4"),i(at,"href","./thirdparty_license.txt"),i(at,"target","_blank"),i(at,"rel","noopener noreferrer"),i(at,"class","svelte-1vw65n4"),i(ut,"href","https://github.com/suzme/punpane-editor"),i(ut,"target","_blank"),i(ut,"rel","noopener noreferrer"),i(ut,"class","svelte-1vw65n4"),i(wt,"class","svelte-1vw65n4"),i(n,"class","container svelte-1vw65n4"),X(n,"dragover",e[15]),v(n,"width",`${e[0].note_width*e[0].panel_num+20+e[0].panel_width*e[0].panel_w_num}px`)},m(s,w){ke(s,t,w),a(t,n),a(n,l),a(l,u),a(l,f),a(l,K),a(l,y),a(l,M),a(l,k),a(l,S),a(l,N),a(n,C),a(n,m),a(m,E),a(m,Re),a(m,Ke),a(m,Ot),a(m,ct),a(m,Pt),a(m,be),a(m,De),a(m,F),a(m,fn),a(m,G),a(m,Ee),a(m,R),R.checked=e[4],a(m,Le),a(m,O),a(m,I),a(m,J),a(m,he);for(let P=0;P<te.length;P+=1)te[P]&&te[P].m(he,null);xt(he,e[5],!0),a(m,T),a(m,Y);for(let P=0;P<ne.length;P+=1)ne[P]&&ne[P].m(Y,null);xt(Y,e[6],!0),a(n,et),a(n,g),a(g,W),a(g,V),a(g,se),a(g,_t),a(g,re),a(g,Ye),a(g,H),a(g,Te),a(g,ae),a(g,pt),a(g,Z),a(g,dt),a(g,z),a(g,Ze),a(g,ge),a(g,Ft),a(g,Se),a(g,ze),a(g,Q),a(g,je),a(g,ue),a(g,ht),a(g,Ne),a(g,Ae),a(g,me),a(g,Ge),a(g,Be),a(g,Jt),a(g,Oe),a(g,gt),a(g,Pe),a(n,Vt),a(n,Ce),a(Ce,Me);for(let P=0;P<le.length;P+=1)le[P]&&le[P].m(Me,null);a(Ce,Ut),a(Ce,$);for(let P=0;P<oe.length;P+=1)oe[P]&&oe[P].m($,null);a($,nt),ce&&ce.m($,null),a($,mt),a($,Ie),a($,it);for(let P=0;P<ie.length;P+=1)ie[P]&&ie[P].m($,null);a(n,Lt),a(n,ve),a(ve,qt),a(ve,Tt),a(ve,Xt),a(ve,ye),Nt(ye,e[17]),a(ve,Yt),a(ve,st),a(ve,Zt),a(ve,we),Nt(we,e[18]),a(n,zt),a(n,We),a(n,Gt),a(n,q),a(q,Je),a(q,Wt),a(q,Ve),a(q,Ht),a(q,Ue),a(q,Qt),a(q,r),a(q,c),a(q,h),a(q,A),a(q,x),a(q,Fe),a(q,ee),Nt(ee,e[12]),a(n,$t),a(n,rt),~U&&He[U].m(rt,null),a(n,bn),a(n,wt),a(wt,at),a(wt,kn),a(wt,ut),j=!0,cn||(Kn=[b(window,"beforeunload",e[57]),b(window,"keydown",e[55]),b(window,"wheel",e[56]),b(window,"drop",e[54]),b(window,"dragover",e[52]),b(window,"dragleave",e[53]),b(E,"change",e[49]),b(be,"change",e[50]),b(G,"change",e[51]),b(R,"change",e[66]),b(he,"change",e[67]),b(Y,"change",e[68]),b(W,"click",e[36](4)),b(se,"click",e[36](8)),b(re,"click",e[36](16)),b(H,"click",e[36](32)),b(ae,"click",e[36](12)),b(Z,"click",e[36](24)),b(z,"click",e[36](48)),b(ge,"click",e[34]),b(Se,"click",e[32]),b(Q,"click",e[33]),b(ue,"click",e[35]),b(Ne,"click",e[39]),b(me,"click",e[38]),b(Be,"click",e[29]),b(Oe,"click",e[30]),b(Pe,"click",e[46]),b(ye,"change",e[70]),b(ye,"input",e[70]),b(ye,"input",e[47]),b(we,"change",e[71]),b(we,"input",e[71]),b(we,"input",e[48]),b(Je,"click",e[40]),b(Ve,"click",e[41]),b(Ue,"click",e[42]),b(r,"click",e[44]),b(h,"click",e[43]),b(x,"click",e[45]),b(ee,"input",e[72])],cn=!0)},p(s,w){if((!j||w[0]&256)&&o!==(o=s[8]+1+"")&&Qe(u,o),(!j||w[0]&262)&&d!==(d=(s[1]-s[8]*192)/(s[25]/s[2])+1+"")&&Qe(K,d),(!j||w[0]&4)&&Qe(M,s[2]),(!j||w[0]&524288)&&B!==(B=Math.round(s[19])+"")&&Qe(S,B),(!j||w[0]&2304&&de!==(de=s[11]===s[8]))&&(E.checked=de),(!j||w[0]&1024&&be.value!==s[10])&&(be.value=s[10]),(!j||w[0]&128&&G.value!==s[7])&&(G.value=s[7]),w[0]&16&&(R.checked=s[4]),w[0]&67108864){bt=s[26];let _;for(_=0;_<bt.length;_+=1){const _e=In(s,bt,_);te[_]?te[_].p(_e,w):(te[_]=Jn(_e),te[_].c(),te[_].m(he,null))}for(;_<te.length;_+=1)te[_].d(1);te.length=bt.length}if(w[0]&67108896&&xt(he,s[5]),w[0]&134217728){kt=s[27];let _;for(_=0;_<kt.length;_+=1){const _e=Bn(s,kt,_);ne[_]?ne[_].p(_e,w):(ne[_]=Vn(_e),ne[_].c(),ne[_].m(Y,null))}for(;_<ne.length;_+=1)ne[_].d(1);ne.length=kt.length}if(w[0]&134217792&&xt(Y,s[6]),(!j||w[0]&4)&&X(W,"selected",s[2]===4),(!j||w[0]&4)&&X(se,"selected",s[2]===8),(!j||w[0]&4)&&X(re,"selected",s[2]===16),(!j||w[0]&4)&&X(H,"selected",s[2]===32),(!j||w[0]&4)&&X(ae,"selected",s[2]===12),(!j||w[0]&4)&&X(Z,"selected",s[2]===24),(!j||w[0]&4)&&X(z,"selected",s[2]===48),w[0]&25165833|w[1]&64){Kt=s[3];let _;for(_=0;_<Kt.length;_+=1){const _e=Tn(s,Kt,_);le[_]?le[_].p(_e,w):(le[_]=qn(_e),le[_].c(),le[_].m(Me,null))}for(;_<le.length;_+=1)le[_].d(1);le.length=Kt.length}if((!j||w[0]&1&&tt!==(tt=`left: ${s[0].note_width*s[0].panel_num+20}px; width: ${s[0].panel_width*5}px;`))&&i(Me,"style",tt),w[0]&38797861|w[1]&1){Dt=s[20];let _;for(_=0;_<Dt.length;_+=1){const _e=Rn(s,Dt,_);oe[_]?oe[_].p(_e,w):(oe[_]=Yn(_e),oe[_].c(),oe[_].m($,nt))}for(;_<oe.length;_+=1)oe[_].d(1);oe.length=Dt.length}if(s[16]>=0?ce?ce.p(s,w):(ce=Zn(s),ce.c(),ce.m($,mt)):ce&&(ce.d(1),ce=null),w[0]&546&&lt!==(lt=`${(s[1]-s[9]*s[25]*s[5])*2/s[5]}px`)&&v(Ie,"top",lt),w[0]&1&&ot!==(ot=`${s[0].note_width*s[0].panel_num}px`)&&v(Ie,"width",ot),w[0]&1048609){Et=s[20];let _;for(_=0;_<Et.length;_+=1){const _e=Pn(s,Et,_);ie[_]?ie[_].p(_e,w):(ie[_]=Gn(_e),ie[_].c(),ie[_].m($,null))}for(;_<ie.length;_+=1)ie[_].d(1);ie.length=Et.length}(!j||w[0]&131072)&&vt!==(vt=s[17].toFixed(2)+"")&&Qe(Tt,vt),w[0]&131072&&Nt(ye,s[17]),(!j||w[0]&262144)&&yt!==(yt=s[18].toFixed(2)+"")&&Qe(st,yt),w[0]&262144&&Nt(we,s[18]),(!j||w[0]&32768)&&X(We,"dragover",s[15]),w[0]&4096&&nn(ee.value)!==s[12]&&Nt(ee,s[12]);let P=U;U=En(s),U===P?~U&&He[U].p(s,w):(fe&&(bl(),On(He[P],1,1,()=>{He[P]=null}),kl()),~U?(fe=He[U],fe?fe.p(s,w):(fe=He[U]=Dn[U](s),fe.c()),gn(fe,1),fe.m(rt,null)):fe=null),(!j||w[0]&32768)&&X(n,"dragover",s[15]),w[0]&1&&v(n,"width",`${s[0].note_width*s[0].panel_num+20+s[0].panel_width*s[0].panel_w_num}px`)},i(s){j||(gn(fe),j=!0)},o(s){On(fe),j=!1},d(s){s&&pe(t),$e(te,s),$e(ne,s),$e(le,s),$e(oe,s),ce&&ce.d(),$e(ie,s),~U&&He[U].d(),cn=!1,ft(Kn)}}}const mn="20240130-0",Ol=100,pn=0,en=200,tn=160;function Pl(e,t,n){let l,o,u,f,d,K,y,M,k,B,S,N,C,m,E,de,Re,Ke,Ot;const Pt=[1,2,4],be=["1/4","1/2","1","2","4"],De={success:"#99ccff",error:"#ffcccc",warning:"#ffffcc"};let F={};const G=new URL(document.location).searchParams.get("key");G&&Bt[G]?(F={...Bt[G]},F.key=G):(F={...Bt["18p"]},F.key="18p");let Ee=1,R=0,Le=16,O=[0],I=[en],J=[tn],he=null,T="",Y=De.success,et=!1,g=new Array(F.panel_num).fill([]),W,V=1,se="1",_t,re=-1,Ye=1,H=1;const Te=new AudioContext,ae=Te.createGain();ae.connect(Te.destination);let pt,Z,dt=!1,z=!1,Ze=[],ge=[];const Ft=()=>{const r=Ze.pop();r&&(r.undo(),ge.push(r))},Se=()=>{const r=ge.pop();r&&(r.do(),Ze.push(r))},ze=r=>{ge=[],Ze.push(r),r.do()},Q=r=>{n(13,T=""),z&&Math.floor(r/192)!==Math.floor(R/192)&&setTimeout(it,0),n(1,R=r)},je=()=>Q(R-3*64/Le),ue=()=>Q(R+3*64/Le),ht=()=>Q((o-1)*V*192),Ne=()=>Q((o+1)*V*192),Ae=r=>()=>{n(13,T=""),n(2,Le=r),n(1,R=Math.floor(R/(192/r))*(192/r))},me=(r,c)=>{Q(c),n(3,g[r]=[...g[r],c],g)},Ge=(r,c)=>{Q(c),n(3,g[r]=g[r].filter(h=>h!==c),g)},Be=(r,c)=>{ze({undo:()=>Ge(r,c),do:()=>me(r,c)})},Jt=(r,c)=>{ze({undo:()=>me(r,c),do:()=>Ge(r,c)})},Oe=r=>()=>{n(13,T=""),g[r].includes(R)?Jt(r,R):Be(r,R),he===null&&(he=setTimeout(()=>{he=null,ue()},Ol))},gt=()=>{n(13,T="");const r=R,c=g.map((h,A)=>h.includes(r)?A:-1).filter(h=>h>=0);ze({do:()=>c.forEach(h=>Ge(h,r)),undo:()=>c.forEach(h=>me(h,r))})},Pe=()=>{je(),gt()},Vt=()=>{confirm("現在編集中のデータは失われます。よろしいですか？")!==!1&&(n(3,g=new Array(F.panel_num).fill([])),Ze=[],ge=[],n(58,O=[]),n(59,I=[]),n(60,J=[]),n(12,Ee=1),n(1,R=0),n(13,T=""))},Ce=(r,c="クリップボードにコピーしました。")=>{navigator.clipboard?(navigator.clipboard.writeText(r),n(13,T=c),n(14,Y=De.success)):prompt("コピーして保存してください。",r)},Me=()=>{Ce(JSON.stringify({title:"punpane-editor-copy",editor_version:mn,copy_data_version:1,resolution:192,key:F.key,panels:de}),"クリップボードに現在のページをコピーしました。")},tt=()=>{Me();const r=g.map(c=>c.filter(h=>o*V*192<=h&&h<(o+1)*V*192));ze({do:()=>r.forEach((c,h)=>c.forEach(A=>Ge(h,A))),undo:()=>r.forEach((c,h)=>c.forEach(A=>me(h,A)))}),n(13,T="クリップボードに現在のページをコピーしました。")},Ut=()=>JSON.stringify({title:"punpane-editor-save",key:F.key,panels:g,label_measures:O,begin_frames:I,bpms:J,resolution:192,chart_num:Ee,editor_version:mn,save_data_version:2}),$=()=>Ce(Ut(),"クリップボードにセーブデータをコピーしました。"),nt=r=>{let c;try{c=JSON.parse(r)}catch(h){console.log(h),n(13,T="セーブデータの読み込みに失敗しました。"),n(14,Y=De.error);return}if(c.title==="punpane-editor-copy"){const h=c.panels,A=o*V;ze({do:()=>h.forEach((x,Fe)=>x.forEach(ee=>{me(Fe,ee+A*192)})),undo:()=>h.forEach((x,Fe)=>x.forEach(ee=>{Ge(Fe,ee+A*192)}))});return}if(c.save_data_version!==1&&c.title!=="punpane-editor-save"){n(13,T="セーブデータの形式が不正です"),n(14,Y=De.error);return}confirm("セーブデータを読み込むと現在編集中のデータは失われます。よろしいですか？")!==!1&&(c.key?(n(0,F={...Bt[c.key]}),n(0,F.key=c.key,F)):(n(0,F={...Bt["18p"]}),n(0,F.key="18p",F)),n(1,R=0),n(3,g=c.panels??new Array(F.panel_num).fill([])),Ze=[],ge=[],n(58,O=c.label_measures??[]),n(59,I=c.begin_frames??[]),n(60,J=c.bpms??[]),n(12,Ee=c.chart_num),n(13,T="セーブデータを読み込みました。"))},mt=()=>{if(navigator.clipboard)navigator.clipboard.readText().then(r=>nt(r));else{const r=prompt("セーブデータを貼り付けてください。");r&&r!==""&&nt(r)}},Ie=()=>g.map((r,c)=>`|${F.dos_chara[c]}${Ee!==1?Ee:""}_data=`+[...r.map(h=>{const A=Math.floor(h/192),x=Math.max(...O.filter(U=>A>=U)),Fe=O.findIndex(U=>U===x),ee=O[Fe]??O[0]??pn,$t=I[Fe]??I[0]??en,rt=J[Fe]??J[0]??tn;return Math.round((h-ee*192)/192*4*60*60/rt+$t)})].sort().join(",")).join("")+"|",lt=()=>Ce(Ie(),"クリップボードにdosをコピーしました。"),ot=()=>{z&&(n(16,re=((Te.currentTime-_t)*S*H/60/4-.5)*192),re>192*V&&(Rt(),it()),requestAnimationFrame(ot))},it=()=>{if(z&&Rt(),dt){const c=((o*V-M-.5)*4*60*60/N+B-200)/60,h=c<0?-c:0;ae.gain.value=Ye,Z=Te.createBufferSource(),Z.buffer=pt,Z.playbackRate.value=H,Z.connect(ae),_t=Te.currentTime+h,Z.start(_t+h,Math.max(c,0)),requestAnimationFrame(ot),z=!0}else pt?n(13,T="再生準備が未完了です。"):n(13,T="音楽ファイルが入力されていません。"),n(14,Y=De.error)},Rt=()=>{Z.stop(),n(16,re=-1),z=!1},Lt=()=>{z?Rt():it()},ve=()=>{ae.gain.value=Ye},qt=()=>{Z.playbackRate.value=H,z&&it()},vt=r=>{if(n(13,T=""),r.target.checked)n(58,O=[...O,l]),n(59,I=[...I,Math.round(C)]),n(60,J=[...J,S]);else{const c=d;n(58,O=O.filter((h,A)=>c!==A)),n(59,I=I.filter((h,A)=>c!==A)),n(60,J=J.filter((h,A)=>c!==A))}},Tt=r=>{n(13,T="");const c=r.target.value;let h;try{h=parseFloat(c)}catch(A){console.log(A),A.target.value=I[d];return}Number.isNaN(h)?r.target.value=I[d]:n(59,I[d]=h,I)},Xt=r=>{n(13,T="");const c=r.target.value;let h;try{h=parseFloat(c)}catch(A){console.log(A),A.target.value=J[d];return}Number.isNaN(h)||h<=0?r.target.value=J[d]:n(60,J[d]=h,J)},ye=r=>{r.preventDefault(),n(15,et=!0),n(13,T="")},Yt=r=>{r.preventDefault(),n(15,et=!1),n(13,T="")},yt=r=>{if(r.stopPropagation(),r.preventDefault(),n(15,et=!1),n(13,T=""),!r.dataTransfer||!r.dataTransfer.files)return;const c=r.dataTransfer.files;if(c.length===0)return;const h=c[0];if(h.type.match(/^audio/)){dt=!1;const A=new FileReader;A.onload=()=>{Te.decodeAudioData(A.result,x=>{pt=x,n(13,T="音楽ファイルの読み込みが完了しました。"),n(14,Y=De.success),dt=!0})},A.readAsArrayBuffer(h)}else if(h.type==="text/plain"){const A=new FileReader;A.onload=()=>{nt(A.result)},A.readAsText(h)}else n(13,T="非対応のファイルタイプです("+h.type+")"),n(14,Y=De.error)},st={ArrowUp:je,ArrowDown:ue,ArrowLeft:ht,ArrowRight:Ne,KeyE:je,KeyD:ue,KeyS:ht,KeyF:Ne,KeyB:je,Space:ue,Digit1:Ae(4),Digit2:Ae(8),Digit3:Ae(16),Digit4:Ae(12),Digit5:Ae(24),Digit6:Ae(48),KeyR:Ae(32),Delete:gt,Backspace:Pe,KeyR:()=>n(4,W=!W),Enter:Lt,KeyZ:Ft,KeyY:Se,KeyC:Me,KeyX:tt,KeyV:mt,KeyS:$,KeyD:lt},Zt=Object.assign({},st);F.key_config.forEach((r,c)=>st[r]=Oe(c));const we=r=>{if(r.target.type!=="number"){const c=r.ctrlKey?Zt:st;c[r.code]&&(c[r.code](),r.preventDefault())}},zt=r=>{r.deltaY>0?ue():r.deltaY<0&&je()},We=r=>{r.preventDefault(),r.returnValue="ページを移動してよろしいですか？現在編集中のデータは失われます。"};function Gt(){W=this.checked,n(4,W)}function q(){V=Cn(this),n(5,V),n(26,Pt)}function Je(){se=Cn(this),n(6,se),n(27,be)}const Wt=r=>Q(o*192*V+r);function Ve(){Ye=nn(this.value),n(17,Ye)}function Ht(){H=nn(this.value),n(18,H)}function Ue(){Ee=nn(this.value),n(12,Ee)}const Qt=()=>n(13,T="");return e.$$.update=()=>{e.$$.dirty[0]&2&&n(8,l=Math.floor(R/192)),e.$$.dirty[0]&34&&n(9,o=Math.floor(R/192/V)),e.$$.dirty[0]&256|e.$$.dirty[1]&134217728&&n(65,u=Math.max(...O.filter(r=>l>=r))),e.$$.dirty[0]&544|e.$$.dirty[1]&134217728&&n(64,f=Math.max(...O.filter(r=>o*V>=r))),e.$$.dirty[1]&134217728|e.$$.dirty[2]&8&&n(61,d=O.findIndex(r=>r===u)),e.$$.dirty[1]&134217728|e.$$.dirty[2]&4&&n(63,K=O.findIndex(r=>r===f)),e.$$.dirty[1]&1207959552&&n(11,y=O[d]??O[0]??pn),e.$$.dirty[1]&134217728|e.$$.dirty[2]&2&&(M=O[K]??O[0]??pn),e.$$.dirty[1]&1342177280&&n(10,k=I[d]??I[0]??en),e.$$.dirty[1]&268435456|e.$$.dirty[2]&2&&(B=I[K]??I[0]??en),e.$$.dirty[1]&1610612736&&n(7,S=J[d]??J[0]??tn),e.$$.dirty[1]&536870912|e.$$.dirty[2]&2&&(N=J[K]??J[0]??tn),e.$$.dirty[0]&3202&&n(19,C=(R-y*192)/192*4*60*60/S+k),e.$$.dirty[0]&64&&n(62,m=(()=>{const r=se.split("/");return r.length===1?parseFloat(r[0]):parseFloat(r[0])/parseFloat(r[1])})()),e.$$.dirty[0]&11&&n(24,E=g.map((r,c)=>r.includes(R)?F.colors[F.panel_color_def[c]]:F.colors[0])),e.$$.dirty[0]&552&&n(20,de=g.map(r=>r.map(c=>c-o*V*192).filter(c=>c>=0&&c<192*V))),e.$$.dirty[0]&26|e.$$.dirty[2]&1&&n(23,Re=g.map(r=>W?r.map(c=>(c-R)*m).filter(c=>c>0&&c<=96):r.map(c=>(R-c)*m).filter(c=>c>0&&c<=96))),e.$$.dirty[0]&36&&n(22,Ke=new Array(Le*V).fill(0).map((r,c)=>192/Le*c)),e.$$.dirty[0]&544|e.$$.dirty[1]&134217728&&n(21,Ot=O.filter(r=>o*V<r&&r<(o+1)*V).length>0)},[F,R,Le,g,W,V,se,S,l,o,k,y,Ee,T,Y,et,re,Ye,H,C,de,Ot,Ke,Re,E,192,Pt,be,De,Ft,Se,Q,je,ue,ht,Ne,Ae,Oe,gt,Pe,Vt,Me,tt,$,mt,lt,Lt,ve,qt,vt,Tt,Xt,ye,Yt,yt,we,zt,We,O,I,J,d,m,K,f,u,Gt,q,Je,Wt,Ve,Ht,Ue,Qt]}class Fl extends Al{constructor(t){super(),Nl(this,t,Pl,Sl,al,{},null,[-1,-1,-1,-1])}}new Fl({target:document.getElementById("app")});
