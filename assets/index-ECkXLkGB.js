var fl=Object.defineProperty;var al=(e,t,n)=>t in e?fl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var _n=(e,t,n)=>(al(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const f of o)if(f.type==="childList")for(const c of f.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const f={};return o.integrity&&(f.integrity=o.integrity),o.referrerPolicy&&(f.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?f.credentials="include":o.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(o){if(o.ep)return;o.ep=!0;const f=n(o);fetch(o.href,f)}})();function Xe(){}const yn=e=>e;function Wn(e){return e()}function Mn(){return Object.create(null)}function ft(e){e.forEach(Wn)}function fn(e){return typeof e=="function"}function cl(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function _l(e){return Object.keys(e).length===0}function En(e){return e??""}const Qn=typeof window<"u";let $n=Qn?()=>window.performance.now():()=>Date.now(),wn=Qn?e=>requestAnimationFrame(e):Xe;const St=new Set;function xn(e){St.forEach(t=>{t.c(e)||(St.delete(t),t.f())}),St.size!==0&&wn(xn)}function el(e){let t;return St.size===0&&wn(xn),{promise:new Promise(n=>{St.add(t={c:e,f:n})}),abort(){St.delete(t)}}}function u(e,t){e.appendChild(t)}function tl(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function pl(e){const t=p("style");return t.textContent="/* empty */",dl(tl(e),t),t.sheet}function dl(e,t){return u(e.head||e,t),t.sheet}function Ne(e,t,n){e.insertBefore(t,n||null)}function ge(e){e.parentNode&&e.parentNode.removeChild(e)}function tt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function T(e){return document.createTextNode(e)}function C(){return T(" ")}function nl(){return T("")}function w(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function i(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function nn(e){return e===""?null:+e}function hl(e){return Array.from(e.childNodes)}function xe(e,t){t=""+t,e.data!==t&&(e.data=t)}function et(e,t){e.value=t??""}function m(e,t,n,l){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,l?"important":"")}function xt(e,t,n){for(let l=0;l<e.options.length;l+=1){const o=e.options[l];if(o.__value===t){o.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Sn(e){const t=e.querySelector(":checked");return t&&t.__value}function Z(e,t,n){e.classList.toggle(t,!!n)}function gl(e,t,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:l})}const on=new Map;let sn=0;function ml(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function vl(e,t){const n={stylesheet:pl(t),rules:{}};return on.set(e,n),n}function ll(e,t,n,l,o,f,c,d=0){const k=16.666/l;let y=`{
`;for(let g=0;g<=1;g+=k){const N=t+(n-t)*f(g);y+=g*100+`%{${c(N,1-N)}}
`}const S=y+`100% {${c(n,1-n)}}
}`,K=`__svelte_${ml(S)}_${d}`,I=tl(e),{stylesheet:A,rules:M}=on.get(I)||vl(I,e);M[K]||(M[K]=!0,A.insertRule(`@keyframes ${K} ${S}`,A.cssRules.length));const E=e.style.animation||"";return e.style.animation=`${E?`${E}, `:""}${K} ${l}ms linear ${o}ms 1 both`,sn+=1,K}function hn(e,t){const n=(e.style.animation||"").split(", "),l=n.filter(t?f=>f.indexOf(t)<0:f=>f.indexOf("__svelte")===-1),o=n.length-l.length;o&&(e.style.animation=l.join(", "),sn-=o,sn||yl())}function yl(){wn(()=>{sn||(on.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&ge(t)}),on.clear())})}let bn;function Ut(e){bn=e}const Et=[],An=[];let At=[];const On=[],wl=Promise.resolve();let gn=!1;function bl(){gn||(gn=!0,wl.then(ol))}function He(e){At.push(e)}const pn=new Set;let Mt=0;function ol(){if(Mt!==0)return;const e=bn;do{try{for(;Mt<Et.length;){const t=Et[Mt];Mt++,Ut(t),kl(t.$$)}}catch(t){throw Et.length=0,Mt=0,t}for(Ut(null),Et.length=0,Mt=0;An.length;)An.pop()();for(let t=0;t<At.length;t+=1){const n=At[t];pn.has(n)||(pn.add(n),n())}At.length=0}while(Et.length);for(;On.length;)On.pop()();gn=!1,pn.clear(),Ut(e)}function kl(e){if(e.fragment!==null){e.update(),ft(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(He)}}function Kl(e){const t=[],n=[];At.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),At=t}let Vt;function il(){return Vt||(Vt=Promise.resolve(),Vt.then(()=>{Vt=null})),Vt}function rn(e,t,n){e.dispatchEvent(gl(`${t?"intro":"outro"}${n}`))}const ln=new Set;let nt;function Dl(){nt={r:0,c:[],p:nt}}function Nl(){nt.r||ft(nt.c),nt=nt.p}function mn(e,t){e&&e.i&&(ln.delete(e),e.i(t))}function Pn(e,t,n,l){if(e&&e.o){if(ln.has(e))return;ln.add(e),nt.c.push(()=>{ln.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}const sl={duration:0};function rl(e,t,n){const l={direction:"in"};let o=t(e,n,l),f=!1,c,d,k=0;function y(){c&&hn(e,c)}function S(){const{delay:I=0,duration:A=300,easing:M=yn,tick:E=Xe,css:g}=o||sl;g&&(c=ll(e,0,1,A,I,M,g,k++)),E(0,1);const N=$n()+I,W=N+A;d&&d.abort(),f=!0,He(()=>rn(e,!0,"start")),d=el(Te=>{if(f){if(Te>=W)return E(1,0),rn(e,!0,"end"),y(),f=!1;if(Te>=N){const Ce=M((Te-N)/A);E(Ce,1-Ce)}}return f})}let K=!1;return{start(){K||(K=!0,hn(e),fn(o)?(o=o(l),il().then(S)):S())},invalidate(){K=!1},end(){f&&(y(),f=!1)}}}function ul(e,t,n){const l={direction:"out"};let o=t(e,n,l),f=!0,c;const d=nt;d.r+=1;let k;function y(){const{delay:S=0,duration:K=300,easing:I=yn,tick:A=Xe,css:M}=o||sl;M&&(c=ll(e,1,0,K,S,I,M));const E=$n()+S,g=E+K;He(()=>rn(e,!1,"start")),"inert"in e&&(k=e.inert,e.inert=!0),el(N=>{if(f){if(N>=g)return A(0,1),rn(e,!1,"end"),--d.r||ft(d.c),!1;if(N>=E){const W=I((N-E)/K);A(1-W,W)}}return f})}return fn(o)?il().then(()=>{o=o(l),y()}):y(),{end(S){S&&"inert"in e&&(e.inert=k),S&&o.tick&&o.tick(1,0),f&&(c&&hn(e,c),f=!1)}}}function ee(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Cl(e,t,n){const{fragment:l,after_update:o}=e.$$;l&&l.m(t,n),He(()=>{const f=e.$$.on_mount.map(Wn).filter(fn);e.$$.on_destroy?e.$$.on_destroy.push(...f):ft(f),e.$$.on_mount=[]}),o.forEach(He)}function Ml(e,t){const n=e.$$;n.fragment!==null&&(Kl(n.after_update),ft(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function El(e,t){e.$$.dirty[0]===-1&&(Et.push(e),bl(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Sl(e,t,n,l,o,f,c=null,d=[-1]){const k=bn;Ut(e);const y=e.$$={fragment:null,ctx:[],props:f,update:Xe,not_equal:o,bound:Mn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(k?k.$$.context:[])),callbacks:Mn(),dirty:d,skip_bound:!1,root:t.target||k.$$.root};c&&c(y.root);let S=!1;if(y.ctx=n?n(e,t.props||{},(K,I,...A)=>{const M=A.length?A[0]:I;return y.ctx&&o(y.ctx[K],y.ctx[K]=M)&&(!y.skip_bound&&y.bound[K]&&y.bound[K](M),S&&El(e,K)),I}):[],y.update(),S=!0,ft(y.before_update),y.fragment=l?l(y.ctx):!1,t.target){if(t.hydrate){const K=hl(t.target);y.fragment&&y.fragment.l(K),K.forEach(ge)}else y.fragment&&y.fragment.c();t.intro&&mn(e.$$.fragment),Cl(e,t.target,t.anchor),ol()}Ut(k)}class Al{constructor(){_n(this,"$$");_n(this,"$$set")}$destroy(){Ml(this,1),this.$destroy=Xe}$on(t,n){if(!fn(n))return Xe;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(t){this.$$set&&!_l(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ol="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ol);function un(e,{delay:t=0,duration:n=400,easing:l=yn}={}){const o=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:l,css:f=>`opacity: ${f*o}`}}const Jt={"18p":{panel_num:18,panel_width:96,panel_height:96,panel_w_num:5,note_width:20,note_height:6,panel_top:[0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,3],panel_left:[0,1,2,3,4,.5,1.5,2.5,3.5,.5,1.5,2.5,3.5,0,1,2,3,4],colors:["#cccccc","#9999ff","#99ffff","#ffff99","#ff9966","#ffffff"],panel_color_def:[1,2,5,3,4,1,2,3,4,1,2,3,4,1,2,5,3,4],names:"7890-UIOPJKL;NM<>/".split(""),dos_chara:"aa,ab,ac,ad,ae,ba,bb,bc,bd,ca,cb,cc,cd,da,db,dc,dd,de".split(","),key_config:"Digit7,Digit8,Digit9,Digit0,Minus,KeyU,KeyI,KeyO,KeyP,KeyJ,KeyK,KeyL,Semicolon,KeyN,KeyM,Comma,Period,Slash".split(",")},"9t":{panel_num:9,panel_width:96,panel_height:96,panel_w_num:3,note_width:30,note_height:6,panel_top:[0,0,0,1,1,1,2,2,2],panel_left:[0,1,2,0,1,2,0,1,2],colors:["#cccccc","#9999ff","#ff9999","#99ff99"],panel_color_def:[1,1,1,2,3,2,1,1,1],names:"789456123".split(""),dos_chara:"left,down,up,right,space,sleft,sdown,sup,sright".split(","),key_config:"Numpad7,Numpad8,Numpad9,Numpad4,Numpad5,Numpad6,Numpad1,Numpad2,Numpad3".split(",")},"36p":{panel_num:36,panel_width:48,panel_height:48,panel_w_num:10,note_width:15,note_height:6,panel_top:[0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,3,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,3],panel_left:[0,1,2,3,4,.5,1.5,2.5,3.5,.5,1.5,2.5,3.5,0,1,2,3,4,5,6,7,8,9,5.5,6.5,7.5,8.5,5.5,6.5,7.5,8.5,5,6,7,8,9],colors:["#cccccc","#9999ff","#99ffff","#ffff99","#ff9966","#ffffff"],panel_color_def:[1,2,5,3,4,1,2,3,4,1,2,3,4,1,2,5,3,4,1,2,5,3,4,1,2,3,4,1,2,3,4,1,2,5,3,4],names:"23456WERTSDFGZXCVB7890-UIOPJKL;NM<>/".split(""),dos_chara:"aa,ab,ac,ad,ae,ba,bb,bc,bd,ca,cb,cc,cd,da,db,dc,dd,de,af,ag,ah,ai,aj,bf,bg,bh,bi,cf,cg,ch,ci,df,dg,dh,di,dj".split(","),key_config:"Digit2,Digit3,Digit4,Digit5,Digit6,KeyW,KeyE,KeyR,KeyT,KeyS,KeyD,KeyF,KeyG,KeyZ,KeyX,KeyC,KeyV,KeyB,Digit7,Digit8,Digit9,Digit0,Minus,KeyU,KeyI,KeyO,KeyP,KeyJ,KeyK,KeyL,Semicolon,KeyN,KeyM,Comma,Period,Slash".split(",")}};function Ln(e,t,n){const l=e.slice();return l[104]=t[n],l[106]=n,l}function Fn(e,t,n){const l=e.slice();return l[107]=t[n],l[109]=n,l}function Tn(e,t,n){const l=e.slice();return l[104]=t[n],l[106]=n,l}function Rn(e,t,n){const l=e.slice();return l[111]=t[n],l[109]=n,l}function Bn(e,t,n){const l=e.slice();return l[113]=t[n],l[106]=n,l}function jn(e,t,n){const l=e.slice();return l[115]=t[n],l}function In(e,t,n){const l=e.slice();return l[118]=t[n],l}function Vn(e,t,n){const l=e.slice();return l[111]=t[n],l}function Jn(e){let t,n=e[111]+"",l;return{c(){t=p("option"),l=T(n),t.__value=e[111],et(t,t.__value)},m(o,f){Ne(o,t,f),u(t,l)},p:Xe,d(o){o&&ge(t)}}}function Un(e){let t,n=e[118]+"",l;return{c(){t=p("option"),l=T(n),t.__value=e[118],et(t,t.__value)},m(o,f){Ne(o,t,f),u(t,l)},p:Xe,d(o){o&&ge(t)}}}function qn(e){let t,n=`${e[0].panel_width-e[115]}px`,l=`${e[0].panel_height-e[115]}px`;return{c(){t=p("div"),t.innerHTML="",i(t,"class","panel_back svelte-1vw65n4"),m(t,"width",n),m(t,"height",l),m(t,"background",e[0].colors[e[0].panel_color_def[e[106]]])},m(o,f){Ne(o,t,f)},p(o,f){f[0]&8388609&&n!==(n=`${o[0].panel_width-o[115]}px`)&&m(t,"width",n),f[0]&8388609&&l!==(l=`${o[0].panel_height-o[115]}px`)&&m(t,"height",l),f[0]&1&&m(t,"background",o[0].colors[o[0].panel_color_def[o[106]]])},d(o){o&&ge(t)}}}function Xn(e){let t,n,l,o=e[0].names[e[106]]+"",f,c,d=`${e[0].panel_width+1}px`,k=`${e[0].panel_height+1}px`,y=`${e[0].panel_top[e[106]]*e[0].panel_height}px`,S=`${e[0].panel_left[e[106]]*e[0].panel_width}px`,K,I,A=ee(e[23][e[106]]),M=[];for(let E=0;E<A.length;E+=1)M[E]=qn(jn(e,A,E));return{c(){t=p("div");for(let E=0;E<M.length;E+=1)M[E].c();n=C(),l=p("div"),f=T(o),c=C(),i(l,"class","svelte-1vw65n4"),i(t,"class","panel svelte-1vw65n4"),m(t,"width",d),m(t,"height",k),m(t,"top",y),m(t,"left",S),m(t,"background",e[24][e[106]])},m(E,g){Ne(E,t,g);for(let N=0;N<M.length;N+=1)M[N]&&M[N].m(t,null);u(t,n),u(t,l),u(l,f),u(t,c),K||(I=w(t,"click",e[37](e[106])),K=!0)},p(E,g){if(e=E,g[0]&8388609){A=ee(e[23][e[106]]);let N;for(N=0;N<A.length;N+=1){const W=jn(e,A,N);M[N]?M[N].p(W,g):(M[N]=qn(W),M[N].c(),M[N].m(t,n))}for(;N<M.length;N+=1)M[N].d(1);M.length=A.length}g[0]&1&&o!==(o=e[0].names[e[106]]+"")&&xe(f,o),g[0]&1&&d!==(d=`${e[0].panel_width+1}px`)&&m(t,"width",d),g[0]&1&&k!==(k=`${e[0].panel_height+1}px`)&&m(t,"height",k),g[0]&1&&y!==(y=`${e[0].panel_top[e[106]]*e[0].panel_height}px`)&&m(t,"top",y),g[0]&1&&S!==(S=`${e[0].panel_left[e[106]]*e[0].panel_width}px`)&&m(t,"left",S),g[0]&16777216&&m(t,"background",e[24][e[106]])},d(E){E&&ge(t),tt(M,E),K=!1,I()}}}function Hn(e){let t,n,l=`${e[0].note_width+1}px`,o=`${e[25]/e[2]*2/e[5]+1}px`,f=`${e[111]*2/e[5]}px`,c=`${e[106]*e[0].note_width}px`,d,k;function y(){return e[69](e[111])}return{c(){t=p("div"),i(t,"class",n=En(e[109]%(e[2]/4)==0?"grid4":"grid")+" svelte-1vw65n4"),m(t,"width",l),m(t,"height",o),m(t,"top",f),m(t,"left",c)},m(S,K){Ne(S,t,K),d||(k=w(t,"click",y),d=!0)},p(S,K){e=S,K[0]&4&&n!==(n=En(e[109]%(e[2]/4)==0?"grid4":"grid")+" svelte-1vw65n4")&&i(t,"class",n),K[0]&1&&l!==(l=`${e[0].note_width+1}px`)&&m(t,"width",l),K[0]&36&&o!==(o=`${e[25]/e[2]*2/e[5]+1}px`)&&m(t,"height",o),K[0]&4194336&&f!==(f=`${e[111]*2/e[5]}px`)&&m(t,"top",f),K[0]&1&&c!==(c=`${e[106]*e[0].note_width}px`)&&m(t,"left",c)},d(S){S&&ge(t),d=!1,k()}}}function Yn(e){let t,n=ee(e[22]),l=[];for(let o=0;o<n.length;o+=1)l[o]=Hn(Rn(e,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();t=nl()},m(o,f){for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(o,f);Ne(o,t,f)},p(o,f){if(f[0]&37749285|f[1]&1){n=ee(o[22]);let c;for(c=0;c<n.length;c+=1){const d=Rn(o,n,c);l[c]?l[c].p(d,f):(l[c]=Hn(d),l[c].c(),l[c].m(t.parentNode,t))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(o){o&&ge(t),tt(l,o)}}}function Zn(e){let t,n=`${e[16]*2/e[5]}px`,l=`${e[0].note_width*e[0].panel_num}px`;return{c(){t=p("div"),t.innerHTML="",i(t,"class","cursor_play svelte-1vw65n4"),m(t,"top",n),m(t,"width",l)},m(o,f){Ne(o,t,f)},p(o,f){f[0]&65568&&n!==(n=`${o[16]*2/o[5]}px`)&&m(t,"top",n),f[0]&1&&l!==(l=`${o[0].note_width*o[0].panel_num}px`)&&m(t,"width",l)},d(o){o&&ge(t)}}}function zn(e){let t,n=`${e[0].note_width+1}px`,l=`${e[0].note_height}px`,o=`${e[107]*2/e[5]-e[0].note_height/2}px`,f=`${e[106]*e[0].note_width}px`;return{c(){t=p("div"),t.innerHTML="",i(t,"class","note svelte-1vw65n4"),m(t,"width",n),m(t,"height",l),m(t,"top",o),m(t,"left",f),m(t,"background",e[0].colors[e[0].panel_color_def[e[106]]])},m(c,d){Ne(c,t,d)},p(c,d){d[0]&1&&n!==(n=`${c[0].note_width+1}px`)&&m(t,"width",n),d[0]&1&&l!==(l=`${c[0].note_height}px`)&&m(t,"height",l),d[0]&1048609&&o!==(o=`${c[107]*2/c[5]-c[0].note_height/2}px`)&&m(t,"top",o),d[0]&1&&f!==(f=`${c[106]*c[0].note_width}px`)&&m(t,"left",f),d[0]&1&&m(t,"background",c[0].colors[c[0].panel_color_def[c[106]]])},d(c){c&&ge(t)}}}function Gn(e){let t,n=ee(e[104]),l=[];for(let o=0;o<n.length;o+=1)l[o]=zn(Fn(e,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();t=nl()},m(o,f){for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(o,f);Ne(o,t,f)},p(o,f){if(f[0]&1048609){n=ee(o[104]);let c;for(c=0;c<n.length;c+=1){const d=Fn(o,n,c);l[c]?l[c].p(d,f):(l[c]=zn(d),l[c].c(),l[c].m(t.parentNode,t))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(o){o&&ge(t),tt(l,o)}}}function Pl(e){let t,n,l,o;return{c(){t=p("div"),t.textContent="ページの途中にラベルがあるため曲再生が正常にできない可能性があります。",i(t,"class","message svelte-1vw65n4"),m(t,"background",e[28].warning)},m(f,c){Ne(f,t,c),o=!0},p:Xe,i(f){o||(f&&He(()=>{o&&(l&&l.end(1),n=rl(t,un,{duration:100}),n.start())}),o=!0)},o(f){n&&n.invalidate(),f&&(l=ul(t,un,{duration:300})),o=!1},d(f){f&&ge(t),f&&l&&l.end()}}}function Ll(e){let t,n,l,o,f,c,d;return{c(){t=p("div"),n=T(e[13]),i(t,"class","message svelte-1vw65n4"),m(t,"background",e[14])},m(k,y){Ne(k,t,y),u(t,n),f=!0,c||(d=w(t,"click",e[73]),c=!0)},p(k,y){(!f||y[0]&8192)&&xe(n,k[13]),y[0]&16384&&m(t,"background",k[14])},i(k){f||(k&&He(()=>{f&&(o&&o.end(1),l=rl(t,un,{duration:100}),l.start())}),f=!0)},o(k){l&&l.invalidate(),k&&(o=ul(t,un,{duration:300})),f=!1},d(k){k&&ge(t),k&&o&&o.end(),c=!1,d()}}}function Fl(e){let t,n,l,o=e[8]+1+"",f,c,d=(e[1]-e[8]*192)/(e[25]/e[2])+1+"",k,y,S,K,I=Math.round(e[19])+"",A,M,E,g,N,W,Te,Ce,Ot,at,Pt,ke,ue,R,an,Q,Me,F,Re,O,V,J,me,P,U,lt,h,$,B,fe,ct,ae,Ye,x,Be,ce,_t,z,pt,G,Ze,ve,Lt,Pe,ze,j,Ge,ye,Ft,Le,Ke,te,Ee,je,qt,Fe,De,Se,Tt,Ie,Ae,We,Rt,ne,dt,ot,Oe,ht=`${(e[1]-e[9]*e[25]*e[5])*2/e[5]}px`,it=`${e[0].note_width*e[0].panel_num}px`,Bt,gt=`${e[25]*2+10}px`,mt,_e,Xt,vt=e[17].toFixed(2)+"",jt,Ht,we,Yt,yt=e[18].toFixed(2)+"",It,wt,be,Zt,Qe,zt,X,Ve,Gt,Je,Wt,Ue,Qt,qe,s,a,D,b,pe,q,$t,st,H,Y,kn,bt,rt,Kn,ut,cn,Dn,kt=ee(e[26]),le=[];for(let r=0;r<kt.length;r+=1)le[r]=Jn(Vn(e,kt,r));let Kt=ee(e[27]),oe=[];for(let r=0;r<Kt.length;r+=1)oe[r]=Un(In(e,Kt,r));let Dt=ee(e[3]),ie=[];for(let r=0;r<Dt.length;r+=1)ie[r]=Xn(Bn(e,Dt,r));let Nt=ee(e[20]),se=[];for(let r=0;r<Nt.length;r+=1)se[r]=Yn(Tn(e,Nt,r));let de=e[16]>=0&&Zn(e),Ct=ee(e[20]),re=[];for(let r=0;r<Ct.length;r+=1)re[r]=Gn(Ln(e,Ct,r));const Nn=[Ll,Pl],$e=[];function Cn(r,v){return r[13]!==""?0:r[21]?1:-1}return~(H=Cn(e))&&(Y=$e[H]=Nn[H](e)),{c(){t=p("main"),n=p("div"),l=p("div"),f=T(o),c=T("小節目, "),k=T(d),y=T("/"),S=T(e[2]),K=T(" ("),A=T(I),M=T("f)"),E=C(),g=p("div"),N=p("input"),Te=C(),Ce=p("label"),Ce.textContent="この小節で設定変更",Ot=T(` |\r
      `),at=p("label"),at.textContent="開始フレーム:",Pt=C(),ke=p("input"),ue=C(),R=p("label"),R.textContent="BPM:",an=C(),Q=p("input"),Me=T(` |\r
      `),F=p("input"),Re=C(),O=p("label"),O.textContent="パネル表示を逆転(R)",V=p("br"),J=T(`\r
      1ページの小節数\r
      `),me=p("select");for(let r=0;r<le.length;r+=1)le[r].c();P=T(`\r
      | パネル表示倍率\r
      `),U=p("select");for(let r=0;r<oe.length;r+=1)oe[r].c();lt=C(),h=p("div"),$=p("input"),B=C(),fe=p("input"),ct=C(),ae=p("input"),Ye=C(),x=p("input"),Be=C(),ce=p("input"),_t=C(),z=p("input"),pt=C(),G=p("input"),Ze=C(),ve=p("input"),Lt=C(),Pe=p("input"),ze=C(),j=p("input"),Ge=C(),ye=p("input"),Ft=C(),Le=p("input"),Ke=C(),te=p("input"),Ee=C(),je=p("input"),qt=C(),Fe=p("input"),De=C(),Se=p("input"),Tt=C(),Ie=p("div"),Ae=p("div");for(let r=0;r<ie.length;r+=1)ie[r].c();Rt=C(),ne=p("div");for(let r=0;r<se.length;r+=1)se[r].c();dt=C(),de&&de.c(),ot=C(),Oe=p("div"),Oe.innerHTML="",Bt=C();for(let r=0;r<re.length;r+=1)re[r].c();mt=C(),_e=p("div"),Xt=T("音量("),jt=T(vt),Ht=T(`)\r
      `),we=p("input"),Yt=T(`\r
      速度(`),It=T(yt),wt=T(`)\r
      `),be=p("input"),Zt=C(),Qe=p("div"),Qe.textContent="画面にファイルをドロップしてセーブデータ/音楽ファイルを読み込み",zt=C(),X=p("div"),Ve=p("input"),Gt=C(),Je=p("input"),Wt=C(),Ue=p("input"),Qt=C(),qe=p("input"),s=C(),a=p("input"),D=C(),b=p("input"),pe=T(`\r
      譜面番号`),q=p("input"),$t=C(),st=p("div"),Y&&Y.c(),kn=C(),bt=p("footer"),rt=p("a"),rt.textContent="使用しているソフトウェアのライセンス表示",Kn=T(` |\r
      `),ut=p("a"),ut.textContent=`Pun◇Pane Editor Ver.${vn}`,i(N,"type","checkbox"),N.checked=W=e[11]===e[8],i(N,"id","fix"),i(Ce,"for","fix"),i(Ce,"class","svelte-1vw65n4"),i(at,"for","begin_frame"),i(at,"class","svelte-1vw65n4"),i(ke,"type","number"),ke.value=e[10],i(ke,"id","begin_frame"),i(ke,"class","svelte-1vw65n4"),i(R,"for","bpm"),i(R,"class","svelte-1vw65n4"),i(Q,"type","number"),Q.value=e[7],i(Q,"step","0.01"),i(Q,"min","0.01"),i(Q,"id","bpm"),i(Q,"class","svelte-1vw65n4"),i(F,"type","checkbox"),i(F,"id","panel_reverse"),i(O,"for","panel_reverse"),i(O,"title","Rキー: カーソルより前のパネルを表示するか後のパネルを表示するかの切り替え"),i(O,"class","svelte-1vw65n4"),i(me,"class","svelte-1vw65n4"),e[5]===void 0&&He(()=>e[67].call(me)),i(U,"class","svelte-1vw65n4"),e[6]===void 0&&He(()=>e[68].call(U)),i(g,"class","main_input svelte-1vw65n4"),i($,"type","button"),$.value="4",i($,"title","1キー: カーソル移動間隔を4分に変更"),i($,"class","svelte-1vw65n4"),Z($,"selected",e[2]===4),i(fe,"type","button"),fe.value="8",i(fe,"title","2キー: カーソル移動間隔を8分に変更"),i(fe,"class","svelte-1vw65n4"),Z(fe,"selected",e[2]===8),i(ae,"type","button"),ae.value="16",i(ae,"title","3キー: カーソル移動間隔を16分に変更"),i(ae,"class","svelte-1vw65n4"),Z(ae,"selected",e[2]===16),i(x,"type","button"),x.value="32",i(x,"title","7/Eキー: カーソル移動間隔を32分に変更"),i(x,"class","svelte-1vw65n4"),Z(x,"selected",e[2]===32),i(ce,"type","button"),ce.value="12",i(ce,"title","4キー: カーソル移動間隔を12分(8分3連)に変更"),i(ce,"class","svelte-1vw65n4"),Z(ce,"selected",e[2]===12),i(z,"type","button"),z.value="24",i(z,"title","5キー: カーソル移動間隔を24分(16分3連)に変更"),i(z,"class","svelte-1vw65n4"),Z(z,"selected",e[2]===24),i(G,"type","button"),G.value="48",i(G,"title","6キー: カーソル移動間隔を48分(32分3連)に変更"),i(G,"class","svelte-1vw65n4"),Z(G,"selected",e[2]===48),i(ve,"type","button"),ve.value="←",i(ve,"title","左矢印キー: 前のページに移動"),i(ve,"class","svelte-1vw65n4"),i(Pe,"type","button"),Pe.value="↑",i(Pe,"title","上矢印/B: カーソルを上に移動"),i(Pe,"class","svelte-1vw65n4"),i(j,"type","button"),j.value="↓",i(j,"title","下矢印/スペース: カーソルを下に移動"),i(j,"class","svelte-1vw65n4"),i(ye,"type","button"),ye.value="→",i(ye,"title","右矢印キー: 次のページに移動"),i(ye,"class","svelte-1vw65n4"),i(Le,"type","button"),Le.value="BS",i(Le,"title","Backspace: カーソルを前に移動してパネルを削除"),i(Le,"class","svelte-1vw65n4"),i(te,"type","button"),te.value="Del",i(te,"title","Delete: カーソルのある行のパネルを削除"),i(te,"class","svelte-1vw65n4"),i(je,"type","button"),je.value="↶",i(je,"title","Ctrl+Z: 元に戻す"),i(je,"class","svelte-1vw65n4"),i(Fe,"type","button"),Fe.value="↷",i(Fe,"title","Ctrl+Y: やり直す"),i(Fe,"class","svelte-1vw65n4"),i(Se,"type","button"),Se.value="♪",i(Se,"title","Enter: 曲再生の開始/停止"),i(Se,"class","svelte-1vw65n4"),i(h,"class","main_buttons svelte-1vw65n4"),i(Ae,"class","panels svelte-1vw65n4"),i(Ae,"style",We=`left: ${e[0].note_width*e[0].panel_num+20}px; width: ${e[0].panel_width*5}px;`),i(Oe,"class","cursor svelte-1vw65n4"),m(Oe,"top",ht),m(Oe,"width",it),i(ne,"class","notes svelte-1vw65n4"),i(Ie,"class","punpane_editor svelte-1vw65n4"),m(Ie,"height",gt),i(we,"type","range"),i(we,"min","0"),i(we,"max","1"),i(we,"step","0.01"),i(be,"type","range"),i(be,"min","0.1"),i(be,"max","1.5"),i(be,"step","0.1"),i(_e,"class","music_control svelte-1vw65n4"),i(Qe,"class","drop_area svelte-1vw65n4"),Z(Qe,"dragover",e[15]),i(Ve,"type","button"),Ve.value="新規作成",i(Ve,"title","編集中の譜面データを初期化します"),i(Ve,"class","svelte-1vw65n4"),i(Je,"type","button"),Je.value="コピー(C)",i(Je,"title","Ctrl+C: 現在のページ内容をクリップボードにコピーします。"),i(Je,"class","svelte-1vw65n4"),i(Ue,"type","button"),Ue.value="切り取り(X)",i(Ue,"title","Ctrl+X: 現在のページ内容をクリップボードに切り取ります。"),i(Ue,"class","svelte-1vw65n4"),i(qe,"type","button"),qe.value="貼り付け/読み込み(V)",i(qe,"title","Ctrl+V: コピーした内容を貼り付けます。クリップボードにセーブデータがある場合、それを読み込みます。"),i(qe,"class","svelte-1vw65n4"),i(a,"type","button"),a.value="セーブ(S)",i(a,"title","Ctrl+S: セーブデータをクリップボードにコピーします。"),i(a,"class","svelte-1vw65n4"),i(b,"type","button"),b.value="dos出力(D)",i(b,"title","Ctrl+D: dosデータをクリップボードにコピーします。"),i(b,"class","svelte-1vw65n4"),i(q,"type","number"),i(q,"min","1"),i(q,"class","svelte-1vw65n4"),i(X,"class","save_buttons svelte-1vw65n4"),i(st,"class","message_container svelte-1vw65n4"),i(rt,"href","./thirdparty_license.txt"),i(rt,"target","_blank"),i(rt,"rel","noopener noreferrer"),i(rt,"class","svelte-1vw65n4"),i(ut,"href","https://github.com/suzme/punpane-editor"),i(ut,"target","_blank"),i(ut,"rel","noopener noreferrer"),i(ut,"class","svelte-1vw65n4"),i(bt,"class","svelte-1vw65n4"),i(n,"class","container svelte-1vw65n4"),Z(n,"dragover",e[15]),m(n,"width",`${e[0].note_width*e[0].panel_num+20+e[0].panel_width*e[0].panel_w_num}px`)},m(r,v){Ne(r,t,v),u(t,n),u(n,l),u(l,f),u(l,c),u(l,k),u(l,y),u(l,S),u(l,K),u(l,A),u(l,M),u(n,E),u(n,g),u(g,N),u(g,Te),u(g,Ce),u(g,Ot),u(g,at),u(g,Pt),u(g,ke),u(g,ue),u(g,R),u(g,an),u(g,Q),u(g,Me),u(g,F),F.checked=e[4],u(g,Re),u(g,O),u(g,V),u(g,J),u(g,me);for(let L=0;L<le.length;L+=1)le[L]&&le[L].m(me,null);xt(me,e[5],!0),u(g,P),u(g,U);for(let L=0;L<oe.length;L+=1)oe[L]&&oe[L].m(U,null);xt(U,e[6],!0),u(n,lt),u(n,h),u(h,$),u(h,B),u(h,fe),u(h,ct),u(h,ae),u(h,Ye),u(h,x),u(h,Be),u(h,ce),u(h,_t),u(h,z),u(h,pt),u(h,G),u(h,Ze),u(h,ve),u(h,Lt),u(h,Pe),u(h,ze),u(h,j),u(h,Ge),u(h,ye),u(h,Ft),u(h,Le),u(h,Ke),u(h,te),u(h,Ee),u(h,je),u(h,qt),u(h,Fe),u(h,De),u(h,Se),u(n,Tt),u(n,Ie),u(Ie,Ae);for(let L=0;L<ie.length;L+=1)ie[L]&&ie[L].m(Ae,null);u(Ie,Rt),u(Ie,ne);for(let L=0;L<se.length;L+=1)se[L]&&se[L].m(ne,null);u(ne,dt),de&&de.m(ne,null),u(ne,ot),u(ne,Oe),u(ne,Bt);for(let L=0;L<re.length;L+=1)re[L]&&re[L].m(ne,null);u(n,mt),u(n,_e),u(_e,Xt),u(_e,jt),u(_e,Ht),u(_e,we),et(we,e[17]),u(_e,Yt),u(_e,It),u(_e,wt),u(_e,be),et(be,e[18]),u(n,Zt),u(n,Qe),u(n,zt),u(n,X),u(X,Ve),u(X,Gt),u(X,Je),u(X,Wt),u(X,Ue),u(X,Qt),u(X,qe),u(X,s),u(X,a),u(X,D),u(X,b),u(X,pe),u(X,q),et(q,e[12]),u(n,$t),u(n,st),~H&&$e[H].m(st,null),u(n,kn),u(n,bt),u(bt,rt),u(bt,Kn),u(bt,ut),cn||(Dn=[w(window,"beforeunload",e[57]),w(window,"keydown",e[55]),w(window,"wheel",e[56]),w(window,"drop",e[54]),w(window,"dragover",e[52]),w(window,"dragleave",e[53]),w(N,"change",e[49]),w(ke,"change",e[50]),w(Q,"change",e[51]),w(F,"change",e[66]),w(me,"change",e[67]),w(U,"change",e[68]),w($,"click",e[36](4)),w(fe,"click",e[36](8)),w(ae,"click",e[36](16)),w(x,"click",e[36](32)),w(ce,"click",e[36](12)),w(z,"click",e[36](24)),w(G,"click",e[36](48)),w(ve,"click",e[34]),w(Pe,"click",e[32]),w(j,"click",e[33]),w(ye,"click",e[35]),w(Le,"click",e[39]),w(te,"click",e[38]),w(je,"click",e[29]),w(Fe,"click",e[30]),w(Se,"click",e[46]),w(we,"change",e[70]),w(we,"input",e[70]),w(we,"input",e[47]),w(be,"change",e[71]),w(be,"input",e[71]),w(be,"input",e[48]),w(Ve,"click",e[40]),w(Je,"click",e[41]),w(Ue,"click",e[42]),w(qe,"click",e[44]),w(a,"click",e[43]),w(b,"click",e[45]),w(q,"input",e[72])],cn=!0)},p(r,v){if(v[0]&256&&o!==(o=r[8]+1+"")&&xe(f,o),v[0]&262&&d!==(d=(r[1]-r[8]*192)/(r[25]/r[2])+1+"")&&xe(k,d),v[0]&4&&xe(S,r[2]),v[0]&524288&&I!==(I=Math.round(r[19])+"")&&xe(A,I),v[0]&2304&&W!==(W=r[11]===r[8])&&(N.checked=W),v[0]&1024&&ke.value!==r[10]&&(ke.value=r[10]),v[0]&128&&Q.value!==r[7]&&(Q.value=r[7]),v[0]&16&&(F.checked=r[4]),v[0]&67108864){kt=ee(r[26]);let _;for(_=0;_<kt.length;_+=1){const he=Vn(r,kt,_);le[_]?le[_].p(he,v):(le[_]=Jn(he),le[_].c(),le[_].m(me,null))}for(;_<le.length;_+=1)le[_].d(1);le.length=kt.length}if(v[0]&67108896&&xt(me,r[5]),v[0]&134217728){Kt=ee(r[27]);let _;for(_=0;_<Kt.length;_+=1){const he=In(r,Kt,_);oe[_]?oe[_].p(he,v):(oe[_]=Un(he),oe[_].c(),oe[_].m(U,null))}for(;_<oe.length;_+=1)oe[_].d(1);oe.length=Kt.length}if(v[0]&134217792&&xt(U,r[6]),v[0]&4&&Z($,"selected",r[2]===4),v[0]&4&&Z(fe,"selected",r[2]===8),v[0]&4&&Z(ae,"selected",r[2]===16),v[0]&4&&Z(x,"selected",r[2]===32),v[0]&4&&Z(ce,"selected",r[2]===12),v[0]&4&&Z(z,"selected",r[2]===24),v[0]&4&&Z(G,"selected",r[2]===48),v[0]&25165833|v[1]&64){Dt=ee(r[3]);let _;for(_=0;_<Dt.length;_+=1){const he=Bn(r,Dt,_);ie[_]?ie[_].p(he,v):(ie[_]=Xn(he),ie[_].c(),ie[_].m(Ae,null))}for(;_<ie.length;_+=1)ie[_].d(1);ie.length=Dt.length}if(v[0]&1&&We!==(We=`left: ${r[0].note_width*r[0].panel_num+20}px; width: ${r[0].panel_width*5}px;`)&&i(Ae,"style",We),v[0]&38797861|v[1]&1){Nt=ee(r[20]);let _;for(_=0;_<Nt.length;_+=1){const he=Tn(r,Nt,_);se[_]?se[_].p(he,v):(se[_]=Yn(he),se[_].c(),se[_].m(ne,dt))}for(;_<se.length;_+=1)se[_].d(1);se.length=Nt.length}if(r[16]>=0?de?de.p(r,v):(de=Zn(r),de.c(),de.m(ne,ot)):de&&(de.d(1),de=null),v[0]&546&&ht!==(ht=`${(r[1]-r[9]*r[25]*r[5])*2/r[5]}px`)&&m(Oe,"top",ht),v[0]&1&&it!==(it=`${r[0].note_width*r[0].panel_num}px`)&&m(Oe,"width",it),v[0]&1048609){Ct=ee(r[20]);let _;for(_=0;_<Ct.length;_+=1){const he=Ln(r,Ct,_);re[_]?re[_].p(he,v):(re[_]=Gn(he),re[_].c(),re[_].m(ne,null))}for(;_<re.length;_+=1)re[_].d(1);re.length=Ct.length}v[0]&131072&&vt!==(vt=r[17].toFixed(2)+"")&&xe(jt,vt),v[0]&131072&&et(we,r[17]),v[0]&262144&&yt!==(yt=r[18].toFixed(2)+"")&&xe(It,yt),v[0]&262144&&et(be,r[18]),v[0]&32768&&Z(Qe,"dragover",r[15]),v[0]&4096&&nn(q.value)!==r[12]&&et(q,r[12]);let L=H;H=Cn(r),H===L?~H&&$e[H].p(r,v):(Y&&(Dl(),Pn($e[L],1,1,()=>{$e[L]=null}),Nl()),~H?(Y=$e[H],Y?Y.p(r,v):(Y=$e[H]=Nn[H](r),Y.c()),mn(Y,1),Y.m(st,null)):Y=null),v[0]&32768&&Z(n,"dragover",r[15]),v[0]&1&&m(n,"width",`${r[0].note_width*r[0].panel_num+20+r[0].panel_width*r[0].panel_w_num}px`)},i(r){mn(Y)},o(r){Pn(Y)},d(r){r&&ge(t),tt(le,r),tt(oe,r),tt(ie,r),tt(se,r),de&&de.d(),tt(re,r),~H&&$e[H].d(),cn=!1,ft(Dn)}}}const vn="20240131-1",Tl=100,dn=0,en=200,tn=160;function Rl(e,t,n){let l,o,f,c,d,k,y,S,K,I,A,M,E,g,N,W,Te,Ce,Ot;const Pt=[1,2,4],ke=["1/4","1/2","1","2","4"],ue={success:"#99ccff",error:"#ffcccc",warning:"#ffffcc"};let R={};const Q=new URL(document.location.toString()).searchParams.get("key");Q&&Jt[Q]?R={...Jt[Q],key:Q}:R={...Jt["18p"],key:"18p"};let Me=1,F=0,Re=16,O=[0],V=[en],J=[tn],me=null,P="",U=ue.success,lt=!1,h=new Array(R.panel_num).fill([]),$,B=1,fe="1",ct,ae=-1,Ye=1,x=1;const Be=new AudioContext,ce=Be.createGain();ce.connect(Be.destination);let _t,z,pt=!1,G=!1,Ze=[],ve=[];const Lt=()=>{const s=Ze.pop();s&&(s.undo?s.undo():(n(13,P="不正なコマンドです。"),n(14,U=ue.error),console.log(s)),ve.push(s))},Pe=()=>{const s=ve.pop();s&&(s.redo?s.redo():s.do?s.do():(n(13,P="不正なコマンドです。"),n(14,U=ue.error),console.log(s)),Ze.push(s))},ze=s=>{s.do?(ve=[],Ze.push(s),s.do()):(n(13,P="不正なコマンドです。"),n(14,U=ue.error),console.log(s))},j=s=>{n(13,P=""),G&&Math.floor(s/(192*B))!==Math.floor(F/(192*B))&&setTimeout(gt,0),n(1,F=s)},Ge=()=>j(F-3*64/Re),ye=()=>j(F+3*64/Re),Ft=()=>j((o-1)*B*192),Le=()=>j((o+1)*B*192),Ke=s=>()=>{n(13,P=""),n(2,Re=s),n(1,F=Math.floor(F/(192/s))*(192/s))},te=(s,a)=>{n(3,h[s]=[...h[s],a],h)},Ee=(s,a)=>{n(3,h[s]=h[s].filter(D=>D!==a),h)},je=(s,a)=>{ze({do:()=>{te(s,a)},redo:()=>{te(s,a),j(a)},undo:()=>{Ee(s,a),j(a)}})},qt=(s,a)=>{ze({do:()=>{Ee(s,a)},redo:()=>{Ee(s,a),j(a)},undo:()=>{te(s,a),j(a)}})},Fe=s=>()=>{n(13,P=""),h[s].includes(F)?qt(s,F):je(s,F),me===null&&(me=setTimeout(()=>{me=null,ye()},Tl))},De=(s,a)=>{s.forEach((D,b)=>{D.forEach(pe=>{a(b,pe)})})},Se=()=>{n(13,P="");const s=F,a=h.map(D=>D.filter(b=>b===s));ze({do:()=>{De(a,Ee)},redo:()=>{De(a,Ee),j(s)},undo:()=>{De(a,te),j(s)}})},Tt=()=>{Ge(),Se()},Ie=()=>{confirm("現在編集中のデータは失われます。よろしいですか？")!==!1&&(n(3,h=new Array(R.panel_num).fill([])),Ze=[],ve=[],n(58,O=[]),n(59,V=[]),n(60,J=[]),n(12,Me=1),n(1,F=0),n(13,P=""))},Ae=(s,a="クリップボードにコピーしました。")=>{navigator.clipboard?(navigator.clipboard.writeText(s),n(13,P=a),n(14,U=ue.success)):prompt("コピーして保存してください。",s)},We=()=>{Ae(JSON.stringify({title:"punpane-editor-copy",editor_version:vn,copy_data_version:1,resolution:192,key:R.key,panels:W}),"クリップボードに現在のページをコピーしました。")},Rt=()=>{We();const s=o*B*192,a=h.map(D=>D.filter(b=>o*B*192<=b&&b<(o+1)*B*192));ze({do:()=>{De(a,Ee)},redo:()=>{De(a,Ee),j(s)},undo:()=>{De(a,te),j(s)}}),n(13,P="クリップボードに現在のページをコピーしました。")},ne=()=>JSON.stringify({title:"punpane-editor-save",key:R.key,panels:h,label_measures:O,begin_frames:V,bpms:J,resolution:192,chart_num:Me,editor_version:vn,save_data_version:2}),dt=()=>Ae(ne(),"クリップボードにセーブデータをコピーしました。"),ot=s=>{let a;try{a=JSON.parse(s)}catch(D){console.log(D),n(13,P="セーブデータの読み込みに失敗しました。"),n(14,U=ue.error);return}if(a.title==="punpane-editor-copy"){const D=a.panels,b=o*B*192;ze({do:()=>{De(D,(pe,q)=>te(pe,q+b))},redo:()=>{De(D,(pe,q)=>te(pe,q+b)),j(b)},undo:()=>{De(D,(pe,q)=>Ee(pe,q+b)),j(b)}});return}if(a.save_data_version!==1&&a.title!=="punpane-editor-save"){n(13,P="セーブデータの形式が不正です"),n(14,U=ue.error);return}confirm("セーブデータを読み込むと現在編集中のデータは失われます。よろしいですか？")!==!1&&(a.key?(n(0,R={...Jt[a.key]}),n(0,R.key=a.key,R)):(n(0,R={...Jt["18p"]}),n(0,R.key="18p",R)),n(1,F=0),n(3,h=a.panels??new Array(R.panel_num).fill([])),Ze=[],ve=[],n(58,O=a.label_measures??[]),n(59,V=a.begin_frames??[]),n(60,J=a.bpms??[]),n(12,Me=a.chart_num),n(13,P="セーブデータを読み込みました。"))},Oe=()=>{if(navigator.clipboard)navigator.clipboard.readText().then(s=>ot(s));else{const s=prompt("セーブデータを貼り付けてください。");s&&s!==""&&ot(s)}},ht=()=>h.map((s,a)=>`|${R.dos_chara[a]}${Me!==1?Me:""}_data=`+[...s.map(D=>{const b=Math.floor(D/192),pe=Math.max(...O.filter(Y=>b>=Y)),q=O.findIndex(Y=>Y===pe),$t=O[q]??O[0]??dn,st=V[q]??V[0]??en,H=J[q]??J[0]??tn;return Math.round((D-$t*192)/192*4*60*60/H+st)})].sort().join(",")).join("")+"|",it=()=>Ae(ht(),"クリップボードにdosをコピーしました。"),Bt=()=>{G&&(n(16,ae=((Be.currentTime-ct)*A*x/60/4-.5)*192),ae>192*B&&(mt(),gt()),requestAnimationFrame(Bt))},gt=()=>{if(G&&mt(),pt){const a=((o*B-S-.5)*4*60*60/M+I-200)/60,D=a<0?-a:0;ce.gain.value=Ye,z=Be.createBufferSource(),z.buffer=_t,z.playbackRate.value=x,z.connect(ce),ct=Be.currentTime+D,z.start(ct+D,Math.max(a,0)),requestAnimationFrame(Bt),G=!0}else _t?n(13,P="再生準備が未完了です。"):n(13,P="音楽ファイルが入力されていません。"),n(14,U=ue.error)},mt=()=>{z.stop(),n(16,ae=-1),G=!1},_e=()=>{G?mt():gt()},Xt=()=>{ce.gain.value=Ye},vt=()=>{z.playbackRate.value=x,G&&gt()},jt=s=>{if(n(13,P=""),s.target.checked)n(58,O=[...O,l]),n(59,V=[...V,Math.round(E)]),n(60,J=[...J,A]);else{const a=d;n(58,O=O.filter((D,b)=>a!==b)),n(59,V=V.filter((D,b)=>a!==b)),n(60,J=J.filter((D,b)=>a!==b))}},Ht=s=>{n(13,P="");const a=s.target.value;let D;try{D=parseFloat(a)}catch(b){console.log(b),b.target.value=V[d];return}Number.isNaN(D)?s.target.value=V[d]:n(59,V[d]=D,V)},we=s=>{n(13,P="");const a=s.target.value;let D;try{D=parseFloat(a)}catch(b){console.log(b),b.target.value=J[d];return}Number.isNaN(D)||D<=0?s.target.value=J[d]:n(60,J[d]=D,J)},Yt=s=>{s.preventDefault(),n(15,lt=!0),n(13,P="")},yt=s=>{s.preventDefault(),n(15,lt=!1),n(13,P="")},It=s=>{if(s.stopPropagation(),s.preventDefault(),n(15,lt=!1),n(13,P=""),!s.dataTransfer||!s.dataTransfer.files)return;const a=s.dataTransfer.files;if(a.length===0)return;const D=a[0];if(D.type.match(/^audio/)){pt=!1;const b=new FileReader;b.onload=()=>{typeof b.result!="string"&&Be.decodeAudioData(b.result,pe=>{_t=pe,n(13,P="音楽ファイルの読み込みが完了しました。"),n(14,U=ue.success),pt=!0})},b.readAsArrayBuffer(D)}else if(D.type==="text/plain"){const b=new FileReader;b.onload=()=>{ot(b.result)},b.readAsText(D)}else n(13,P="非対応のファイルタイプです("+D.type+")"),n(14,U=ue.error)},wt={ArrowUp:Ge,ArrowDown:ye,ArrowLeft:Ft,ArrowRight:Le,KeyB:Ge,Space:ye,Digit1:Ke(4),Digit2:Ke(8),Digit3:Ke(16),Digit4:Ke(12),Digit5:Ke(24),Digit6:Ke(48),Digit7:Ke(32),KeyE:Ke(32),Delete:Se,Backspace:Tt,KeyR:()=>n(4,$=!$),Enter:_e},be=Object.assign({KeyZ:Lt,KeyY:Pe,KeyC:We,KeyX:Rt,KeyV:Oe,KeyS:dt,KeyD:it},wt);R.key_config.forEach((s,a)=>wt[s]=Fe(a));const Zt=s=>{if(s.target.type!=="number"){const a=s.ctrlKey?be:wt;a[s.code]&&(a[s.code](),s.preventDefault())}},Qe=s=>{s.deltaY>0?ye():s.deltaY<0&&Ge()},zt=s=>{s.preventDefault(),s.returnValue="ページを移動してよろしいですか？現在編集中のデータは失われます。"};function X(){$=this.checked,n(4,$)}function Ve(){B=Sn(this),n(5,B),n(26,Pt)}function Gt(){fe=Sn(this),n(6,fe),n(27,ke)}const Je=s=>j(o*192*B+s);function Wt(){Ye=nn(this.value),n(17,Ye)}function Ue(){x=nn(this.value),n(18,x)}function Qt(){Me=nn(this.value),n(12,Me)}const qe=()=>n(13,P="");return e.$$.update=()=>{e.$$.dirty[0]&2&&n(8,l=Math.floor(F/192)),e.$$.dirty[0]&34&&n(9,o=Math.floor(F/192/B)),e.$$.dirty[0]&256|e.$$.dirty[1]&134217728&&n(65,f=Math.max(...O.filter(s=>l>=s))),e.$$.dirty[0]&544|e.$$.dirty[1]&134217728&&n(64,c=Math.max(...O.filter(s=>o*B>=s))),e.$$.dirty[1]&134217728|e.$$.dirty[2]&8&&n(61,d=O.findIndex(s=>s===f)),e.$$.dirty[1]&134217728|e.$$.dirty[2]&4&&n(63,k=O.findIndex(s=>s===c)),e.$$.dirty[1]&1207959552&&n(11,y=O[d]??O[0]??dn),e.$$.dirty[1]&134217728|e.$$.dirty[2]&2&&(S=O[k]??O[0]??dn),e.$$.dirty[1]&1342177280&&n(10,K=V[d]??V[0]??en),e.$$.dirty[1]&268435456|e.$$.dirty[2]&2&&(I=V[k]??V[0]??en),e.$$.dirty[1]&1610612736&&n(7,A=J[d]??J[0]??tn),e.$$.dirty[1]&536870912|e.$$.dirty[2]&2&&(M=J[k]??J[0]??tn),e.$$.dirty[0]&3202&&n(19,E=(F-y*192)/192*4*60*60/A+K),e.$$.dirty[0]&64&&n(62,g=(()=>{const s=fe.split("/");return s.length===1?parseFloat(s[0]):parseFloat(s[0])/parseFloat(s[1])})()),e.$$.dirty[0]&11&&n(24,N=h.map((s,a)=>s.includes(F)?R.colors[R.panel_color_def[a]]:R.colors[0])),e.$$.dirty[0]&552&&n(20,W=h.map(s=>s.map(a=>a-o*B*192).filter(a=>a>=0&&a<192*B))),e.$$.dirty[0]&26|e.$$.dirty[2]&1&&n(23,Te=h.map(s=>$?s.map(a=>(a-F)*g).filter(a=>a>0&&a<=96):s.map(a=>(F-a)*g).filter(a=>a>0&&a<=96))),e.$$.dirty[0]&36&&n(22,Ce=new Array(Re*B).fill(0).map((s,a)=>192/Re*a)),e.$$.dirty[0]&544|e.$$.dirty[1]&134217728&&n(21,Ot=O.filter(s=>o*B<s&&s<(o+1)*B).length>0)},[R,F,Re,h,$,B,fe,A,l,o,K,y,Me,P,U,lt,ae,Ye,x,E,W,Ot,Ce,Te,N,192,Pt,ke,ue,Lt,Pe,j,Ge,ye,Ft,Le,Ke,Fe,Se,Tt,Ie,We,Rt,dt,Oe,it,_e,Xt,vt,jt,Ht,we,Yt,yt,It,Zt,Qe,zt,O,V,J,d,g,k,c,f,X,Ve,Gt,Je,Wt,Ue,Qt,qe]}class Bl extends Al{constructor(t){super(),Sl(this,t,Rl,Fl,cl,{},null,[-1,-1,-1,-1])}}new Bl({target:document.getElementById("app")});
