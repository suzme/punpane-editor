(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const f of r.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function l(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=l(o);fetch(o.href,r)}})();function rt(){}const Vt=e=>e;function bl(e){return e()}function xt(){return Object.create(null)}function Be(e){e.forEach(bl)}function Ot(e){return typeof e=="function"}function Sl(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Rl(e){return Object.keys(e).length===0}const vl=typeof window<"u";let wl=vl?()=>window.performance.now():()=>Date.now(),zt=vl?e=>requestAnimationFrame(e):rt;const st=new Set;function kl(e){st.forEach(t=>{t.c(e)||(st.delete(t),t.f())}),st.size!==0&&zt(kl)}function Kl(e){let t;return st.size===0&&zt(kl),{promise:new Promise(l=>{st.add(t={c:e,f:l})}),abort(){st.delete(t)}}}function i(e,t){e.appendChild(t)}function Dl(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Fl(e){const t=_("style");return Ll(Dl(e),t),t.sheet}function Ll(e,t){return i(e.head||e,t),t.sheet}function Ae(e,t,l){e.insertBefore(t,l||null)}function ue(e){e.parentNode&&e.parentNode.removeChild(e)}function it(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function _(e){return document.createElement(e)}function B(e){return document.createTextNode(e)}function K(){return B(" ")}function Nl(){return B("")}function b(e,t,l,n){return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)}function s(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function Mt(e){return e===""?null:+e}function Ol(e){return Array.from(e.childNodes)}function Se(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function lt(e,t){e.value=t??""}function g(e,t,l,n){l===null?e.style.removeProperty(t):e.style.setProperty(t,l,n?"important":"")}function U(e,t,l){e.classList[l?"add":"remove"](t)}function Tl(e,t,{bubbles:l=!1,cancelable:n=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,l,n,t),o}const Rt=new Map;let Ft=0;function Bl(e){let t=5381,l=e.length;for(;l--;)t=(t<<5)-t^e.charCodeAt(l);return t>>>0}function jl(e,t){const l={stylesheet:Fl(t),rules:{}};return Rt.set(e,l),l}function El(e,t,l,n,o,r,f,m=0){const y=16.666/n;let h=`{
`;for(let c=0;c<=1;c+=y){const k=t+(l-t)*r(c);h+=c*100+`%{${f(k,1-k)}}
`}const E=h+`100% {${f(l,1-l)}}
}`,A=`__svelte_${Bl(E)}_${m}`,O=Dl(e),{stylesheet:S,rules:M}=Rt.get(O)||jl(O,e);M[A]||(M[A]=!0,S.insertRule(`@keyframes ${A} ${E}`,S.cssRules.length));const D=e.style.animation||"";return e.style.animation=`${D?`${D}, `:""}${A} ${n}ms linear ${o}ms 1 both`,Ft+=1,A}function Ut(e,t){const l=(e.style.animation||"").split(", "),n=l.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),o=l.length-n.length;o&&(e.style.animation=n.join(", "),Ft-=o,Ft||Il())}function Il(){zt(()=>{Ft||(Rt.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&ue(t)}),Rt.clear())})}let Gt;function gt(e){Gt=e}const ot=[],el=[],Ct=[],tl=[],Jl=Promise.resolve();let qt=!1;function Ul(){qt||(qt=!0,Jl.then(Al))}function at(e){Ct.push(e)}const jt=new Set;let nt=0;function Al(){if(nt!==0)return;const e=Gt;do{try{for(;nt<ot.length;){const t=ot[nt];nt++,gt(t),ql(t.$$)}}catch(t){throw ot.length=0,nt=0,t}for(gt(null),ot.length=0,nt=0;el.length;)el.pop()();for(let t=0;t<Ct.length;t+=1){const l=Ct[t];jt.has(l)||(jt.add(l),l())}Ct.length=0}while(ot.length);for(;tl.length;)tl.pop()();qt=!1,jt.clear(),gt(e)}function ql(e){if(e.fragment!==null){e.update(),Be(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(at)}}let ht;function Ml(){return ht||(ht=Promise.resolve(),ht.then(()=>{ht=null})),ht}function Lt(e,t,l){e.dispatchEvent(Tl(`${t?"intro":"outro"}${l}`))}const Pt=new Set;let Re;function Vl(){Re={r:0,c:[],p:Re}}function zl(){Re.r||Be(Re.c),Re=Re.p}function St(e,t){e&&e.i&&(Pt.delete(e),e.i(t))}function ll(e,t,l,n){if(e&&e.o){if(Pt.has(e))return;Pt.add(e),Re.c.push(()=>{Pt.delete(e),n&&(l&&e.d(1),n())}),e.o(t)}else n&&n()}const Cl={duration:0};function Gl(e,t,l){const n={direction:"in"};let o=t(e,l,n),r=!1,f,m,y=0;function h(){f&&Ut(e,f)}function E(){const{delay:O=0,duration:S=300,easing:M=Vt,tick:D=rt,css:c}=o||Cl;c&&(f=El(e,0,1,S,O,M,c,y++)),D(0,1);const k=wl()+O,Y=k+S;m&&m.abort(),r=!0,at(()=>Lt(e,!0,"start")),m=Kl(W=>{if(r){if(W>=Y)return D(1,0),Lt(e,!0,"end"),h(),r=!1;if(W>=k){const P=M((W-k)/S);D(P,1-P)}}return r})}let A=!1;return{start(){A||(A=!0,Ut(e),Ot(o)?(o=o(n),Ml().then(E)):E())},invalidate(){A=!1},end(){r&&(h(),r=!1)}}}function Wl(e,t,l){const n={direction:"out"};let o=t(e,l,n),r=!0,f;const m=Re;m.r+=1;function y(){const{delay:h=0,duration:E=300,easing:A=Vt,tick:O=rt,css:S}=o||Cl;S&&(f=El(e,1,0,E,h,A,S));const M=wl()+h,D=M+E;at(()=>Lt(e,!1,"start")),Kl(c=>{if(r){if(c>=D)return O(0,1),Lt(e,!1,"end"),--m.r||Be(m.c),!1;if(c>=M){const k=A((c-M)/E);O(1-k,k)}}return r})}return Ot(o)?Ml().then(()=>{o=o(n),y()}):y(),{end(h){h&&o.tick&&o.tick(1,0),r&&(f&&Ut(e,f),r=!1)}}}function Xl(e,t,l,n){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,l),n||at(()=>{const f=e.$$.on_mount.map(bl).filter(Ot);e.$$.on_destroy?e.$$.on_destroy.push(...f):Be(f),e.$$.on_mount=[]}),r.forEach(at)}function Yl(e,t){const l=e.$$;l.fragment!==null&&(Be(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function Zl(e,t){e.$$.dirty[0]===-1&&(ot.push(e),Ul(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Hl(e,t,l,n,o,r,f,m=[-1]){const y=Gt;gt(e);const h=e.$$={fragment:null,ctx:[],props:r,update:rt,not_equal:o,bound:xt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(y?y.$$.context:[])),callbacks:xt(),dirty:m,skip_bound:!1,root:t.target||y.$$.root};f&&f(h.root);let E=!1;if(h.ctx=l?l(e,t.props||{},(A,O,...S)=>{const M=S.length?S[0]:O;return h.ctx&&o(h.ctx[A],h.ctx[A]=M)&&(!h.skip_bound&&h.bound[A]&&h.bound[A](M),E&&Zl(e,A)),O}):[],h.update(),E=!0,Be(h.before_update),h.fragment=n?n(h.ctx):!1,t.target){if(t.hydrate){const A=Ol(t.target);h.fragment&&h.fragment.l(A),A.forEach(ue)}else h.fragment&&h.fragment.c();t.intro&&St(e.$$.fragment),Xl(e,t.target,t.anchor,t.customElement),Al()}gt(y)}class Ql{$destroy(){Yl(this,1),this.$destroy=rt}$on(t,l){if(!Ot(l))return rt;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(l),()=>{const o=n.indexOf(l);o!==-1&&n.splice(o,1)}}$set(t){this.$$set&&!Rl(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function nl(e,{delay:t=0,duration:l=400,easing:n=Vt}={}){const o=+getComputedStyle(e).opacity;return{delay:t,duration:l,easing:n,css:r=>`opacity: ${r*o}`}}const dt={"18p":{panel_num:18,panel_width:96,panel_height:96,note_width:20,note_height:6,panel_top:[0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,3],panel_left:[0,1,2,3,4,.5,1.5,2.5,3.5,.5,1.5,2.5,3.5,0,1,2,3,4],colors:["#cccccc","#9999ff","#99ffff","#ffff99","#ff9966","#ffffff"],panel_color_def:[1,2,5,3,4,1,2,3,4,1,2,3,4,1,2,5,3,4],names:"7890-UIOPJKL;NM<>/".split(""),dos_chara:"aa,ab,ac,ad,ae,ba,bb,bc,bd,ca,cb,cc,cd,da,db,dc,dd,de".split(","),key_config:"Digit7,Digit8,Digit9,Digit0,Minus,KeyU,KeyI,KeyO,KeyP,KeyJ,KeyK,KeyL,Semicolon,KeyN,KeyM,Comma,Period,Slash".split(",")},"9t":{panel_num:9,panel_width:96,panel_height:96,note_width:30,note_height:6,panel_top:[0,0,0,1,1,1,2,2,2],panel_left:[0,1,2,0,1,2,0,1,2],colors:["#cccccc","#9999ff","#ff9999","#99ff99"],panel_color_def:[1,1,1,2,3,2,1,1,1],names:"789456123".split(""),dos_chara:"left,down,up,right,space,sleft,sdown,sup,sright".split(","),key_config:"Numpad7,Numpad8,Numpad9,Numpad4,Numpad5,Numpad6,Numpad1,Numpad2,Numpad3".split(",")},"36p":{panel_num:36,panel_width:48,panel_height:48,note_width:15,note_height:6,panel_top:[0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,3,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,3],panel_left:[0,1,2,3,4,.5,1.5,2.5,3.5,.5,1.5,2.5,3.5,0,1,2,3,4,5,6,7,8,9,5.5,6.5,7.5,8.5,5.5,6.5,7.5,8.5,5,6,7,8,9],colors:["#cccccc","#9999ff","#99ffff","#ffff99","#ff9966","#ffffff"],panel_color_def:[1,2,5,3,4,1,2,3,4,1,2,3,4,1,2,5,3,4,1,2,5,3,4,1,2,3,4,1,2,3,4,1,2,5,3,4],names:"23456WERTSDFGZXCVB7890-UIOPJKL;NM<>/".split(""),dos_chara:"aa,ab,ac,ad,ae,ba,bb,bc,bd,ca,cb,cc,cd,da,db,dc,dd,de,af,ag,ah,ai,aj,bf,bg,bh,bi,cf,cg,ch,ci,df,dg,dh,di,dj".split(","),key_config:"Digit2,Digit3,Digit4,Digit5,Digit6,KeyW,KeyE,KeyR,KeyT,KeyS,KeyD,KeyF,KeyG,KeyZ,KeyX,KeyC,KeyV,KeyB,Digit7,Digit8,Digit9,Digit0,Minus,KeyU,KeyI,KeyO,KeyP,KeyJ,KeyK,KeyL,Semicolon,KeyN,KeyM,Comma,Period,Slash".split(",")}};function ol(e,t,l){const n=e.slice();return n[80]=t[l],n[82]=l,n}function sl(e,t,l){const n=e.slice();return n[83]=t[l],n[85]=l,n}function il(e,t,l){const n=e.slice();return n[80]=t[l],n[82]=l,n}function rl(e,t,l){const n=e.slice();return n[87]=t[l],n}function al(e,t,l){const n=e.slice();return n[90]=t[l],n[82]=l,n}function fl(e,t,l){const n=e.slice();return n[92]=t[l],n}function ul(e){let t,l=`${e[0].panel_width-e[92]}px`,n=`${e[0].panel_height-e[92]}px`;return{c(){t=_("div"),s(t,"class","panel_back svelte-2scaft"),g(t,"width",l),g(t,"height",n),g(t,"background",e[0].colors[e[0].panel_color_def[e[82]]])},m(o,r){Ae(o,t,r)},p(o,r){r[0]&262145&&l!==(l=`${o[0].panel_width-o[92]}px`)&&g(t,"width",l),r[0]&262145&&n!==(n=`${o[0].panel_height-o[92]}px`)&&g(t,"height",n),r[0]&1&&g(t,"background",o[0].colors[o[0].panel_color_def[o[82]]])},d(o){o&&ue(t)}}}function cl(e){let t,l,n,o=e[0].names[e[82]]+"",r,f,m=`${e[0].panel_width+1}px`,y=`${e[0].panel_height+1}px`,h=`${e[0].panel_top[e[82]]*e[0].panel_height}px`,E=`${e[0].panel_left[e[82]]*e[0].panel_width}px`,A,O,S=e[18][e[82]],M=[];for(let D=0;D<S.length;D+=1)M[D]=ul(fl(e,S,D));return{c(){t=_("div");for(let D=0;D<M.length;D+=1)M[D].c();l=K(),n=_("div"),r=B(o),f=K(),s(n,"class","svelte-2scaft"),s(t,"class","panel svelte-2scaft"),g(t,"width",m),g(t,"height",y),g(t,"top",h),g(t,"left",E),g(t,"background",e[20][e[82]])},m(D,c){Ae(D,t,c);for(let k=0;k<M.length;k+=1)M[k].m(t,null);i(t,l),i(t,n),i(n,r),i(t,f),A||(O=b(t,"click",e[28](e[82])),A=!0)},p(D,c){if(e=D,c[0]&262145){S=e[18][e[82]];let k;for(k=0;k<S.length;k+=1){const Y=fl(e,S,k);M[k]?M[k].p(Y,c):(M[k]=ul(Y),M[k].c(),M[k].m(t,l))}for(;k<M.length;k+=1)M[k].d(1);M.length=S.length}c[0]&1&&o!==(o=e[0].names[e[82]]+"")&&Se(r,o),c[0]&1&&m!==(m=`${e[0].panel_width+1}px`)&&g(t,"width",m),c[0]&1&&y!==(y=`${e[0].panel_height+1}px`)&&g(t,"height",y),c[0]&1&&h!==(h=`${e[0].panel_top[e[82]]*e[0].panel_height}px`)&&g(t,"top",h),c[0]&1&&E!==(E=`${e[0].panel_left[e[82]]*e[0].panel_width}px`)&&g(t,"left",E),c[0]&1048576&&g(t,"background",e[20][e[82]])},d(D){D&&ue(t),it(M,D),A=!1,O()}}}function pl(e){let t,l=`${e[0].note_width+1}px`,n=`${e[21]/e[2]*2+1}px`,o=`${e[87]*2}px`,r=`${e[82]*e[0].note_width}px`,f,m;function y(){return e[53](e[87])}return{c(){t=_("div"),s(t,"class","grid svelte-2scaft"),g(t,"width",l),g(t,"height",n),g(t,"top",o),g(t,"left",r)},m(h,E){Ae(h,t,E),f||(m=b(t,"click",y),f=!0)},p(h,E){e=h,E[0]&1&&l!==(l=`${e[0].note_width+1}px`)&&g(t,"width",l),E[0]&4&&n!==(n=`${e[21]/e[2]*2+1}px`)&&g(t,"height",n),E[0]&131072&&o!==(o=`${e[87]*2}px`)&&g(t,"top",o),E[0]&1&&r!==(r=`${e[82]*e[0].note_width}px`)&&g(t,"left",r)},d(h){h&&ue(t),f=!1,m()}}}function _l(e){let t,l=e[17],n=[];for(let o=0;o<l.length;o+=1)n[o]=pl(rl(e,l,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();t=Nl()},m(o,r){for(let f=0;f<n.length;f+=1)n[f].m(o,r);Ae(o,t,r)},p(o,r){if(r[0]&6422597){l=o[17];let f;for(f=0;f<l.length;f+=1){const m=rl(o,l,f);n[f]?n[f].p(m,r):(n[f]=pl(m),n[f].c(),n[f].m(t.parentNode,t))}for(;f<n.length;f+=1)n[f].d(1);n.length=l.length}},d(o){it(n,o),o&&ue(t)}}}function hl(e){let t,l=`${e[13]*2}px`,n=`${e[0].note_width*e[0].panel_num}px`;return{c(){t=_("div"),s(t,"class","cursor_play svelte-2scaft"),g(t,"top",l),g(t,"width",n)},m(o,r){Ae(o,t,r)},p(o,r){r[0]&8192&&l!==(l=`${o[13]*2}px`)&&g(t,"top",l),r[0]&1&&n!==(n=`${o[0].note_width*o[0].panel_num}px`)&&g(t,"width",n)},d(o){o&&ue(t)}}}function dl(e){let t,l=`${e[0].note_width+1}px`,n=`${e[0].note_height}px`,o=`${e[83]*2-e[0].note_height/2}px`,r=`${e[82]*e[0].note_width}px`;return{c(){t=_("div"),s(t,"class","note svelte-2scaft"),g(t,"width",l),g(t,"height",n),g(t,"top",o),g(t,"left",r),g(t,"background",e[0].colors[e[0].panel_color_def[e[82]]])},m(f,m){Ae(f,t,m)},p(f,m){m[0]&1&&l!==(l=`${f[0].note_width+1}px`)&&g(t,"width",l),m[0]&1&&n!==(n=`${f[0].note_height}px`)&&g(t,"height",n),m[0]&524289&&o!==(o=`${f[83]*2-f[0].note_height/2}px`)&&g(t,"top",o),m[0]&1&&r!==(r=`${f[82]*f[0].note_width}px`)&&g(t,"left",r),m[0]&1&&g(t,"background",f[0].colors[f[0].panel_color_def[f[82]]])},d(f){f&&ue(t)}}}function gl(e){let t,l=e[80],n=[];for(let o=0;o<l.length;o+=1)n[o]=dl(sl(e,l,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();t=Nl()},m(o,r){for(let f=0;f<n.length;f+=1)n[f].m(o,r);Ae(o,t,r)},p(o,r){if(r[0]&524289){l=o[80];let f;for(f=0;f<l.length;f+=1){const m=sl(o,l,f);n[f]?n[f].p(m,r):(n[f]=dl(m),n[f].c(),n[f].m(t.parentNode,t))}for(;f<n.length;f+=1)n[f].d(1);n.length=l.length}},d(o){it(n,o),o&&ue(t)}}}function ml(e){let t,l,n,o,r,f,m;return{c(){t=_("div"),l=B(e[10]),s(t,"class","message svelte-2scaft"),g(t,"background",e[11])},m(y,h){Ae(y,t,h),i(t,l),r=!0,f||(m=b(t,"click",e[57]),f=!0)},p(y,h){(!r||h[0]&1024)&&Se(l,y[10]),h[0]&2048&&g(t,"background",y[11])},i(y){r||(at(()=>{o&&o.end(1),n=Gl(t,nl,{duration:100}),n.start()}),r=!0)},o(y){n&&n.invalidate(),o=Wl(t,nl,{duration:300}),r=!1},d(y){y&&ue(t),y&&o&&o.end(),f=!1,m()}}}function $l(e){let t,l,n,o=e[6]+1+"",r,f,m=(e[1]-e[6]*192)/(e[21]/e[2])+1+"",y,h,E,A,O=Math.round(e[16])+"",S,M,D,c,k,Y,W,P,ye,T,I,R,je,F,be,q,j,Z,Ie,re,Me,v,V,Fe,te,ce,le,pe,z,ve,G,Je,ne,ae,fe,mt,_e,Ue,he,yt,de,bt,we,qe,ke,vt,Ke,ft,ie,Ve,ge,De,ze,wt,X,ut,ct,Ne,Ge=`${(e[1]-e[6]*e[21])*2}px`,Le=`${e[0].note_width*e[0].panel_num}px`,kt,Tt=`${e[21]*2+10}px`,Kt,oe,Dt,We=e[14].toFixed(2)+"",pt,Nt,se,Et,u=e[15].toFixed(2)+"",p,C,N,Xe,me,At,H,Ce,Ye,Ze,Wt,He,Xt,Qe,Yt,Ee,Zt,_t,Ht,$e,Oe,Qt,Te,L,Bt,$t,xe=e[3],Q=[];for(let a=0;a<xe.length;a+=1)Q[a]=cl(al(e,xe,a));let et=e[19],$=[];for(let a=0;a<et.length;a+=1)$[a]=_l(il(e,et,a));let x=e[13]>=0&&hl(e),tt=e[19],ee=[];for(let a=0;a<tt.length;a+=1)ee[a]=gl(ol(e,tt,a));let J=e[10]!==""&&ml(e);return{c(){t=_("main"),l=_("div"),n=_("div"),r=B(o),f=B("小節目, "),y=B(m),h=B("/"),E=B(e[2]),A=B(" ("),S=B(O),M=B("f)"),D=K(),c=_("div"),k=_("input"),W=K(),P=_("label"),P.textContent="この小節で設定変更",ye=B(` |\r
      `),T=_("label"),T.textContent="開始フレーム:",I=K(),R=_("input"),je=K(),F=_("label"),F.textContent="BPM:",be=K(),q=_("input"),j=B(` |\r
      `),Z=_("input"),Ie=K(),re=_("label"),re.textContent="パネル表示を逆転",Me=K(),v=_("div"),V=_("input"),Fe=K(),te=_("input"),ce=K(),le=_("input"),pe=K(),z=_("input"),ve=K(),G=_("input"),Je=K(),ne=_("input"),ae=K(),fe=_("input"),mt=K(),_e=_("input"),Ue=K(),he=_("input"),yt=K(),de=_("input"),bt=K(),we=_("input"),qe=K(),ke=_("input"),vt=K(),Ke=_("input"),ft=K(),ie=_("input"),Ve=K(),ge=_("div"),De=_("div");for(let a=0;a<Q.length;a+=1)Q[a].c();wt=K(),X=_("div");for(let a=0;a<$.length;a+=1)$[a].c();ut=K(),x&&x.c(),ct=K(),Ne=_("div"),kt=K();for(let a=0;a<ee.length;a+=1)ee[a].c();Kt=K(),oe=_("div"),Dt=B("音量("),pt=B(We),Nt=B(`)\r
      `),se=_("input"),Et=B(`\r
      速度(`),p=B(u),C=B(`)\r
      `),N=_("input"),Xe=K(),me=_("div"),me.textContent="画面にファイルをドロップしてセーブデータ/音楽ファイルを読み込み",At=K(),H=_("div"),Ce=_("input"),Ye=K(),Ze=_("input"),Wt=K(),He=_("input"),Xt=K(),Qe=_("input"),Yt=B(`\r
      譜面番号`),Ee=_("input"),Zt=K(),_t=_("div"),J&&J.c(),Ht=K(),$e=_("footer"),Oe=_("a"),Oe.textContent="使用しているソフトウェアのライセンス表示",Qt=B(` |\r
      `),Te=_("a"),Te.textContent=`Pun◇Pane Editor Ver.${Pl}`,s(k,"type","checkbox"),k.checked=Y=e[8]===e[6],s(k,"id","fix"),s(P,"for","fix"),s(P,"class","svelte-2scaft"),s(T,"for","begin_frame"),s(T,"class","svelte-2scaft"),s(R,"type","number"),R.value=e[7],s(R,"id","begin_frame"),s(R,"class","svelte-2scaft"),s(F,"for","bpm"),s(F,"class","svelte-2scaft"),s(q,"type","number"),q.value=e[5],s(q,"step","0.01"),s(q,"min","0.01"),s(q,"id","bpm"),s(q,"class","svelte-2scaft"),s(Z,"type","checkbox"),s(Z,"id","panel_reverse"),s(re,"for","panel_reverse"),s(re,"title","Rキー: カーソルより前のパネルを表示するか後のパネルを表示するかの切り替え"),s(re,"class","svelte-2scaft"),s(c,"class","main_input svelte-2scaft"),s(V,"type","button"),V.value="4",s(V,"title","1キー: カーソル移動間隔を4分に変更"),s(V,"class","svelte-2scaft"),U(V,"selected",e[2]===4),s(te,"type","button"),te.value="8",s(te,"title","2キー: カーソル移動間隔を8分に変更"),s(te,"class","svelte-2scaft"),U(te,"selected",e[2]===8),s(le,"type","button"),le.value="16",s(le,"title","3キー: カーソル移動間隔を16分に変更"),s(le,"class","svelte-2scaft"),U(le,"selected",e[2]===16),s(z,"type","button"),z.value="32",s(z,"title","Rキー: カーソル移動間隔を32分に変更"),s(z,"class","svelte-2scaft"),U(z,"selected",e[2]===32),s(G,"type","button"),G.value="12",s(G,"title","4キー: カーソル移動間隔を12分(8分3連)に変更"),s(G,"class","svelte-2scaft"),U(G,"selected",e[2]===12),s(ne,"type","button"),ne.value="24",s(ne,"title","5キー: カーソル移動間隔を24分(16分3連)に変更"),s(ne,"class","svelte-2scaft"),U(ne,"selected",e[2]===24),s(fe,"type","button"),fe.value="48",s(fe,"title","6キー: カーソル移動間隔を48分(32分3連)に変更"),s(fe,"class","svelte-2scaft"),U(fe,"selected",e[2]===48),s(_e,"type","button"),_e.value="←",s(_e,"title","左矢印キー: 前の小節に移動"),s(_e,"class","svelte-2scaft"),s(he,"type","button"),he.value="↑",s(he,"title","上矢印/E/B: カーソルを上に移動"),s(he,"class","svelte-2scaft"),s(de,"type","button"),de.value="↓",s(de,"title","下矢印/D/スペース: カーソルを下に移動"),s(de,"class","svelte-2scaft"),s(we,"type","button"),we.value="→",s(we,"title","右矢印キー: 次の小節に移動"),s(we,"class","svelte-2scaft"),s(ke,"type","button"),ke.value="BS",s(ke,"title","Backspace: カーソルを前に移動してパネルを削除"),s(ke,"class","svelte-2scaft"),s(Ke,"type","button"),Ke.value="DEL",s(Ke,"title","Delete: カーソルのある行のパネルを削除"),s(Ke,"class","svelte-2scaft"),s(ie,"type","button"),ie.value="Enter",s(ie,"title","Enter: 曲再生の開始/停止"),s(ie,"class","svelte-2scaft"),s(v,"class","main_buttons svelte-2scaft"),s(De,"class","panels svelte-2scaft"),s(De,"style",ze=`left: ${e[0].note_width*e[0].panel_num+20}px; width: ${e[0].panel_width*5}px;`),s(Ne,"class","cursor svelte-2scaft"),g(Ne,"top",Ge),g(Ne,"width",Le),s(X,"class","notes svelte-2scaft"),s(ge,"class","punpane_editor svelte-2scaft"),g(ge,"height",Tt),s(se,"type","range"),s(se,"min","0"),s(se,"max","1"),s(se,"step","0.01"),s(N,"type","range"),s(N,"min","0.1"),s(N,"max","1.5"),s(N,"step","0.1"),s(oe,"class","music_control svelte-2scaft"),s(me,"class","drop_area svelte-2scaft"),U(me,"dragover",e[12]),s(Ce,"type","button"),Ce.value="新規作成",s(Ce,"class","svelte-2scaft"),s(Ze,"type","button"),Ze.value="クリップボードから読み込み",s(Ze,"class","svelte-2scaft"),s(He,"type","button"),He.value="セーブデータの保存",s(He,"class","svelte-2scaft"),s(Qe,"type","button"),Qe.value="dosの保存",s(Qe,"class","svelte-2scaft"),s(Ee,"type","number"),s(Ee,"min","1"),s(Ee,"class","svelte-2scaft"),s(H,"class","save_buttons svelte-2scaft"),s(_t,"class","message_container svelte-2scaft"),s(Oe,"href","./thirdparty_license.txt"),s(Oe,"target","_blank"),s(Oe,"rel","noopener noreferrer"),s(Oe,"class","svelte-2scaft"),s(Te,"href","https://github.com/suzme/punpane-editor"),s(Te,"target","_blank"),s(Te,"rel","noopener noreferrer"),s(Te,"class","svelte-2scaft"),s($e,"class","svelte-2scaft"),s(l,"class","container svelte-2scaft"),U(l,"dragover",e[12]),g(l,"width",`${e[0].note_width*e[0].panel_num+20+e[0].panel_width*5}px`)},m(a,w){Ae(a,t,w),i(t,l),i(l,n),i(n,r),i(n,f),i(n,y),i(n,h),i(n,E),i(n,A),i(n,S),i(n,M),i(l,D),i(l,c),i(c,k),i(c,W),i(c,P),i(c,ye),i(c,T),i(c,I),i(c,R),i(c,je),i(c,F),i(c,be),i(c,q),i(c,j),i(c,Z),Z.checked=e[4],i(c,Ie),i(c,re),i(l,Me),i(l,v),i(v,V),i(v,Fe),i(v,te),i(v,ce),i(v,le),i(v,pe),i(v,z),i(v,ve),i(v,G),i(v,Je),i(v,ne),i(v,ae),i(v,fe),i(v,mt),i(v,_e),i(v,Ue),i(v,he),i(v,yt),i(v,de),i(v,bt),i(v,we),i(v,qe),i(v,ke),i(v,vt),i(v,Ke),i(v,ft),i(v,ie),i(l,Ve),i(l,ge),i(ge,De);for(let d=0;d<Q.length;d+=1)Q[d].m(De,null);i(ge,wt),i(ge,X);for(let d=0;d<$.length;d+=1)$[d].m(X,null);i(X,ut),x&&x.m(X,null),i(X,ct),i(X,Ne),i(X,kt);for(let d=0;d<ee.length;d+=1)ee[d].m(X,null);i(l,Kt),i(l,oe),i(oe,Dt),i(oe,pt),i(oe,Nt),i(oe,se),lt(se,e[14]),i(oe,Et),i(oe,p),i(oe,C),i(oe,N),lt(N,e[15]),i(l,Xe),i(l,me),i(l,At),i(l,H),i(H,Ce),i(H,Ye),i(H,Ze),i(H,Wt),i(H,He),i(H,Xt),i(H,Qe),i(H,Yt),i(H,Ee),lt(Ee,e[9]),i(l,Zt),i(l,_t),J&&J.m(_t,null),i(l,Ht),i(l,$e),i($e,Oe),i($e,Qt),i($e,Te),L=!0,Bt||($t=[b(window,"beforeunload",e[46]),b(window,"keydown",e[44]),b(window,"wheel",e[45]),b(window,"drop",e[43]),b(window,"dragover",e[41]),b(window,"dragleave",e[42]),b(k,"change",e[38]),b(R,"change",e[39]),b(q,"change",e[40]),b(Z,"change",e[52]),b(V,"click",e[27](4)),b(te,"click",e[27](8)),b(le,"click",e[27](16)),b(z,"click",e[27](32)),b(G,"click",e[27](12)),b(ne,"click",e[27](24)),b(fe,"click",e[27](48)),b(_e,"click",e[25]),b(he,"click",e[23]),b(de,"click",e[24]),b(we,"click",e[26]),b(ke,"click",e[30]),b(Ke,"click",e[29]),b(ie,"click",e[35]),b(se,"change",e[54]),b(se,"input",e[54]),b(se,"input",e[36]),b(N,"change",e[55]),b(N,"input",e[55]),b(N,"input",e[37]),b(Ce,"click",e[31]),b(Ze,"click",e[33]),b(He,"click",e[32]),b(Qe,"click",e[34]),b(Ee,"input",e[56])],Bt=!0)},p(a,w){if((!L||w[0]&64)&&o!==(o=a[6]+1+"")&&Se(r,o),(!L||w[0]&70)&&m!==(m=(a[1]-a[6]*192)/(a[21]/a[2])+1+"")&&Se(y,m),(!L||w[0]&4)&&Se(E,a[2]),(!L||w[0]&65536)&&O!==(O=Math.round(a[16])+"")&&Se(S,O),(!L||w[0]&320&&Y!==(Y=a[8]===a[6]))&&(k.checked=Y),(!L||w[0]&128&&R.value!==a[7])&&(R.value=a[7]),(!L||w[0]&32&&q.value!==a[5])&&(q.value=a[5]),w[0]&16&&(Z.checked=a[4]),(!L||w[0]&4)&&U(V,"selected",a[2]===4),(!L||w[0]&4)&&U(te,"selected",a[2]===8),(!L||w[0]&4)&&U(le,"selected",a[2]===16),(!L||w[0]&4)&&U(z,"selected",a[2]===32),(!L||w[0]&4)&&U(G,"selected",a[2]===12),(!L||w[0]&4)&&U(ne,"selected",a[2]===24),(!L||w[0]&4)&&U(fe,"selected",a[2]===48),w[0]&269746185){xe=a[3];let d;for(d=0;d<xe.length;d+=1){const Pe=al(a,xe,d);Q[d]?Q[d].p(Pe,w):(Q[d]=cl(Pe),Q[d].c(),Q[d].m(De,null))}for(;d<Q.length;d+=1)Q[d].d(1);Q.length=xe.length}if((!L||w[0]&1&&ze!==(ze=`left: ${a[0].note_width*a[0].panel_num+20}px; width: ${a[0].panel_width*5}px;`))&&s(De,"style",ze),w[0]&6946885){et=a[19];let d;for(d=0;d<et.length;d+=1){const Pe=il(a,et,d);$[d]?$[d].p(Pe,w):($[d]=_l(Pe),$[d].c(),$[d].m(X,ut))}for(;d<$.length;d+=1)$[d].d(1);$.length=et.length}if(a[13]>=0?x?x.p(a,w):(x=hl(a),x.c(),x.m(X,ct)):x&&(x.d(1),x=null),w[0]&66&&Ge!==(Ge=`${(a[1]-a[6]*a[21])*2}px`)&&g(Ne,"top",Ge),w[0]&1&&Le!==(Le=`${a[0].note_width*a[0].panel_num}px`)&&g(Ne,"width",Le),w[0]&524289){tt=a[19];let d;for(d=0;d<tt.length;d+=1){const Pe=ol(a,tt,d);ee[d]?ee[d].p(Pe,w):(ee[d]=gl(Pe),ee[d].c(),ee[d].m(X,null))}for(;d<ee.length;d+=1)ee[d].d(1);ee.length=tt.length}(!L||w[0]&16384)&&We!==(We=a[14].toFixed(2)+"")&&Se(pt,We),w[0]&16384&&lt(se,a[14]),(!L||w[0]&32768)&&u!==(u=a[15].toFixed(2)+"")&&Se(p,u),w[0]&32768&&lt(N,a[15]),(!L||w[0]&4096)&&U(me,"dragover",a[12]),w[0]&512&&Mt(Ee.value)!==a[9]&&lt(Ee,a[9]),a[10]!==""?J?(J.p(a,w),w[0]&1024&&St(J,1)):(J=ml(a),J.c(),St(J,1),J.m(_t,null)):J&&(Vl(),ll(J,1,1,()=>{J=null}),zl()),(!L||w[0]&4096)&&U(l,"dragover",a[12]),w[0]&1&&g(l,"width",`${a[0].note_width*a[0].panel_num+20+a[0].panel_width*5}px`)},i(a){L||(St(J),L=!0)},o(a){ll(J),L=!1},d(a){a&&ue(t),it(Q,a),it($,a),x&&x.d(),it(ee,a),J&&J.d(),Bt=!1,Be($t)}}}const Pl="20230815-0",xl=100,yl=0,It=200,Jt=160;function en(e,t,l){let n,o,r,f,m,y,h,E,A,O,S;const D={success:"#99ccff",error:"#ffcccc"};let c={};const Y=new URL(document.location).searchParams.get("key");Y&&dt[Y]?(c={...dt[Y]},c.key=Y):(c={...dt["18p"]},c.key="18p");let W=1,P=0,ye=16,T=[0],I=[It],R=[Jt],je=null,F="",be=D.success,q=!1,j=new Array(c.panel_num).fill([]),Z,Ie,re=-1,Me=1,v=1;const V=new AudioContext,Fe=V.createGain();Fe.connect(V.destination);let te,ce,le=!1,pe=!1;const z=u=>{l(10,F=""),pe&&Math.floor(u/192)!==Math.floor(P/192)&&setTimeout(ie,0),l(1,P=u)},ve=()=>z(P-3*64/ye),G=()=>z(P+3*64/ye),Je=()=>z((n-1)*192),ne=()=>z((n+1)*192),ae=u=>()=>{l(10,F=""),l(2,ye=u),l(1,P=Math.floor(P/(192/u))*(192/u))},fe=(u,p)=>{l(3,j[u]=[...j[u],p],j)},mt=(u,p)=>{l(3,j[u]=j[u].filter(C=>C!==p),j)},_e=u=>()=>{l(10,F=""),j[u].includes(P)?mt(u,P):fe(u,P),je===null&&(je=setTimeout(()=>{je=null,G()},xl))},Ue=()=>{l(10,F=""),l(3,j=j.map(u=>u.filter(p=>p!==P)))},he=()=>{ve(),Ue()},yt=()=>{confirm("現在編集中のデータは失われます。よろしいですか？")!==!1&&(l(3,j=new Array(c.panel_num).fill([])),l(47,T=[]),l(48,I=[]),l(49,R=[]),l(9,W=1),l(1,P=0),l(10,F=""))},de=(u,p="クリップボードにコピーしました。")=>{navigator.clipboard?(navigator.clipboard.writeText(u),l(10,F=p),l(11,be=D.success)):prompt("コピーして保存してください。",u)},bt=()=>JSON.stringify({key:c.key,panels:j,label_measures:T,begin_frames:I,bpms:R,resolution:192,chart_num:W,editor_version:Pl,save_data_version:1}),we=()=>de(bt(),"クリップボードにセーブデータをコピーしました。"),qe=u=>{let p;if(confirm("セーブデータを読み込むと現在編集中のデータは失われます。よろしいですか？")!==!1){try{p=JSON.parse(u)}catch(C){console.log(C),l(10,F="セーブデータの読み込みに失敗しました。"),l(11,be=D.error);return}p.key?(l(0,c={...dt[p.key]}),l(0,c.key=p.key,c)):(l(0,c={...dt["18p"]}),l(0,c.key="18p",c)),l(1,P=0),l(3,j=p.panels??new Array(c.panel_num).fill([])),l(47,T=p.label_measures??[]),l(48,I=p.begin_frames??[]),l(49,R=p.bpms??[]),l(9,W=p.chart_num),l(10,F="セーブデータを読み込みました。")}},ke=()=>{if(navigator.clipboard)navigator.clipboard.readText().then(u=>qe(u));else{const u=prompt("セーブデータを貼り付けてください。");u&&u!==""&&qe(u)}},vt=()=>j.map((u,p)=>`|${c.dos_chara[p]}${W!==1?W:""}_data=`+[...u.map(C=>{const N=Math.floor(C/192),Xe=Math.max(...T.filter(Ye=>N>=Ye)),me=T.findIndex(Ye=>Ye===Xe),At=T[me]??T[0]??yl,H=I[me]??I[0]??It,Ce=R[me]??R[0]??Jt;return Math.round((C-At*192)/192*4*60*60/Ce+H)})].sort().join(",")).join("")+"|",Ke=()=>de(vt(),"クリップボードにdosをコピーしました。"),ft=()=>{pe&&(l(13,re=((V.currentTime-Ie)*y*v/60/4-.5)*192),re>192&&(Ve(),ie()),requestAnimationFrame(ft))},ie=()=>{if(pe&&Ve(),le){const p=((n-f-.5)*4*60*60/y+m-200)/60,C=p<0?-p:0;Fe.gain.value=Me,ce=V.createBufferSource(),ce.buffer=te,ce.playbackRate.value=v,ce.connect(Fe),Ie=V.currentTime+C,ce.start(Ie+C,Math.max(p,0)),requestAnimationFrame(ft),pe=!0}else te?l(10,F="再生準備が未完了です。"):l(10,F="音楽ファイルが入力されていません。"),l(11,be=D.error)},Ve=()=>{ce.stop(),l(13,re=-1),pe=!1},ge=()=>{pe?Ve():ie()},De=()=>{Fe.gain.value=Me},ze=()=>{ce.playbackRate.value=v,pe&&ie()},wt=u=>{if(l(10,F=""),u.target.checked)l(47,T=[...T,n]),l(48,I=[...I,Math.round(h)]),l(49,R=[...R,y]);else{const p=r;l(47,T=T.filter((C,N)=>p!==N)),l(48,I=I.filter((C,N)=>p!==N)),l(49,R=R.filter((C,N)=>p!==N))}},X=u=>{l(10,F="");const p=u.target.value;let C;try{C=parseFloat(p)}catch(N){console.log(N),N.target.value=I[r];return}Number.isNaN(C)?u.target.value=I[r]:l(48,I[r]=C,I)},ut=u=>{l(10,F="");const p=u.target.value;let C;try{C=parseFloat(p)}catch(N){console.log(N),N.target.value=R[r];return}Number.isNaN(C)||C<=0?u.target.value=R[r]:l(49,R[r]=C,R)},ct=u=>{u.preventDefault(),l(12,q=!0),l(10,F="")},Ne=u=>{u.preventDefault(),l(12,q=!1),l(10,F="")},Ge=u=>{if(u.stopPropagation(),u.preventDefault(),l(12,q=!1),l(10,F=""),!u.dataTransfer||!u.dataTransfer.files)return;const p=u.dataTransfer.files;if(p.length===0)return;const C=p[0];if(C.type.match(/^audio/)){le=!1;const N=new FileReader;N.onload=()=>{V.decodeAudioData(N.result,Xe=>{te=Xe,l(10,F="音楽ファイルの読み込みが完了しました。"),l(11,be=D.success),le=!0})},N.readAsArrayBuffer(C)}else if(C.type==="text/plain"){const N=new FileReader;N.onload=()=>{qe(N.result)},N.readAsText(C)}else l(10,F="非対応のファイルタイプです("+C.type+")"),l(11,be=D.error)},Le={ArrowUp:ve,ArrowDown:G,ArrowLeft:Je,ArrowRight:ne,KeyE:ve,KeyD:G,KeyS:Je,KeyF:ne,KeyB:ve,Space:G,Digit1:ae(4),Digit2:ae(8),Digit3:ae(16),Digit4:ae(12),Digit5:ae(24),Digit6:ae(48),KeyR:ae(32),Delete:Ue,Backspace:he,KeyR:()=>l(4,Z=!Z),Enter:ge};c.key_config.forEach((u,p)=>Le[u]=_e(p));const kt={},Tt=u=>{if(u.target.type!=="number"){const p=u.ctrlKey?kt:Le;p[u.code]&&(p[u.code](),u.preventDefault())}},Kt=u=>{u.deltaY>0?G():u.deltaY<0&&ve()},oe=u=>{u.preventDefault(),u.returnValue="ページを移動してよろしいですか？現在編集中のデータは失われます。"};function Dt(){Z=this.checked,l(4,Z)}const We=u=>z(n*192+u);function pt(){Me=Mt(this.value),l(14,Me)}function Nt(){v=Mt(this.value),l(15,v)}function se(){W=Mt(this.value),l(9,W)}const Et=()=>l(10,F="");return e.$$.update=()=>{e.$$.dirty[0]&2&&l(6,n=Math.floor(P/192)),e.$$.dirty[0]&64|e.$$.dirty[1]&65536&&l(51,o=Math.max(...T.filter(u=>n>=u))),e.$$.dirty[1]&1114112&&l(50,r=T.findIndex(u=>u===o)),e.$$.dirty[1]&589824&&l(8,f=T[r]??T[0]??yl),e.$$.dirty[1]&655360&&l(7,m=I[r]??I[0]??It),e.$$.dirty[1]&786432&&l(5,y=R[r]??R[0]??Jt),e.$$.dirty[0]&418&&l(16,h=(P-f*192)/192*4*60*60/y+m),e.$$.dirty[0]&11&&l(20,E=j.map((u,p)=>u.includes(P)?c.colors[c.panel_color_def[p]]:c.colors[0])),e.$$.dirty[0]&72&&l(19,A=j.map(u=>u.map(p=>p-n*192).filter(p=>p>=0&&p<192))),e.$$.dirty[0]&26&&l(18,O=j.map(u=>Z?u.map(p=>p-P).filter(p=>p>0&&p<=96):u.map(p=>P-p).filter(p=>p>0&&p<=96))),e.$$.dirty[0]&4&&l(17,S=new Array(ye).fill(0).map((u,p)=>192/ye*p))},[c,P,ye,j,Z,y,n,m,f,W,F,be,q,re,Me,v,h,S,O,A,E,192,z,ve,G,Je,ne,ae,_e,Ue,he,yt,we,ke,Ke,ge,De,ze,wt,X,ut,ct,Ne,Ge,Tt,Kt,oe,T,I,R,r,o,Dt,We,pt,Nt,se,Et]}class tn extends Ql{constructor(t){super(),Hl(this,t,en,$l,Sl,{},null,[-1,-1,-1,-1])}}new tn({target:document.getElementById("app")});
