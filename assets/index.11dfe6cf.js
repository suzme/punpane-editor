const Kl=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function l(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=l(n);fetch(n.href,i)}};Kl();function _t(){}const Vt=e=>e;function ml(e){return e()}function Wt(){return Object.create(null)}function Ve(e){e.forEach(ml)}function Yt(e){return typeof e=="function"}function Ml(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Pl(e){return Object.keys(e).length===0}const gl=typeof window!="undefined";let vl=gl?()=>window.performance.now():()=>Date.now(),Gt=gl?e=>requestAnimationFrame(e):_t;const lt=new Set;function bl(e){lt.forEach(t=>{t.c(e)||(lt.delete(t),t.f())}),lt.size!==0&&Gt(bl)}function yl(e){let t;return lt.size===0&&Gt(bl),{promise:new Promise(l=>{lt.add(t={c:e,f:l})}),abort(){lt.delete(t)}}}function r(e,t){e.appendChild(t)}function kl(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Sl(e){const t=p("style");return Fl(kl(e),t),t.sheet}function Fl(e,t){r(e.head||e,t)}function Me(e,t,l){e.insertBefore(t,l||null)}function ke(e){e.parentNode.removeChild(e)}function st(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function p(e){return document.createElement(e)}function L(e){return document.createTextNode(e)}function A(){return L(" ")}function wl(){return L("")}function b(e,t,l,s){return e.addEventListener(t,l,s),()=>e.removeEventListener(t,l,s)}function o(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function Ct(e){return e===""?null:+e}function Ol(e){return Array.from(e.childNodes)}function Je(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function tt(e,t){e.value=t==null?"":t}function E(e,t,l,s){l===null?e.style.removeProperty(t):e.style.setProperty(t,l,s?"important":"")}function U(e,t,l){e.classList[l?"add":"remove"](t)}function Rl(e,t,{bubbles:l=!1,cancelable:s=!1}={}){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,l,s,t),n}const St=new Map;let Ft=0;function zl(e){let t=5381,l=e.length;for(;l--;)t=(t<<5)-t^e.charCodeAt(l);return t>>>0}function Ll(e,t){const l={stylesheet:Sl(t),rules:{}};return St.set(e,l),l}function Dl(e,t,l,s,n,i,a,g=0){const _=16.666/s;let d=`{
`;for(let y=0;y<=1;y+=_){const D=t+(l-t)*i(y);d+=y*100+`%{${a(D,1-D)}}
`}const P=d+`100% {${a(l,1-l)}}
}`,N=`__svelte_${zl(P)}_${g}`,F=kl(e),{stylesheet:S,rules:C}=St.get(F)||Ll(F,e);C[N]||(C[N]=!0,S.insertRule(`@keyframes ${N} ${P}`,S.cssRules.length));const K=e.style.animation||"";return e.style.animation=`${K?`${K}, `:""}${N} ${s}ms linear ${n}ms 1 both`,Ft+=1,N}function Jt(e,t){const l=(e.style.animation||"").split(", "),s=l.filter(t?i=>i.indexOf(t)<0:i=>i.indexOf("__svelte")===-1),n=l.length-s.length;n&&(e.style.animation=s.join(", "),Ft-=n,Ft||Tl())}function Tl(){Gt(()=>{Ft||(St.forEach(e=>{const{stylesheet:t}=e;let l=t.cssRules.length;for(;l--;)t.deleteRule(l);e.rules={}}),St.clear())})}let Ht;function dt(e){Ht=e}const pt=[],Xt=[],Kt=[],Zt=[],Bl=Promise.resolve();let Ut=!1;function jl(){Ut||(Ut=!0,Bl.then(Al))}function nt(e){Kt.push(e)}const Bt=new Set;let Nt=0;function Al(){const e=Ht;do{for(;Nt<pt.length;){const t=pt[Nt];Nt++,dt(t),Il(t.$$)}for(dt(null),pt.length=0,Nt=0;Xt.length;)Xt.pop()();for(let t=0;t<Kt.length;t+=1){const l=Kt[t];Bt.has(l)||(Bt.add(l),l())}Kt.length=0}while(pt.length);for(;Zt.length;)Zt.pop()();Ut=!1,Bt.clear(),dt(e)}function Il(e){if(e.fragment!==null){e.update(),Ve(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(nt)}}let ut;function El(){return ut||(ut=Promise.resolve(),ut.then(()=>{ut=null})),ut}function Ot(e,t,l){e.dispatchEvent(Rl(`${t?"intro":"outro"}${l}`))}const Mt=new Set;let Re;function ql(){Re={r:0,c:[],p:Re}}function Jl(){Re.r||Ve(Re.c),Re=Re.p}function Pt(e,t){e&&e.i&&(Mt.delete(e),e.i(t))}function xt(e,t,l,s){if(e&&e.o){if(Mt.has(e))return;Mt.add(e),Re.c.push(()=>{Mt.delete(e),s&&(l&&e.d(1),s())}),e.o(t)}}const Nl={duration:0};function Ul(e,t,l){let s=t(e,l),n=!1,i,a,g=0;function _(){i&&Jt(e,i)}function d(){const{delay:N=0,duration:F=300,easing:S=Vt,tick:C=_t,css:K}=s||Nl;K&&(i=Dl(e,0,1,F,N,S,K,g++)),C(0,1);const y=vl()+N,D=y+F;a&&a.abort(),n=!0,nt(()=>Ot(e,!0,"start")),a=yl(Z=>{if(n){if(Z>=D)return C(1,0),Ot(e,!0,"end"),_(),n=!1;if(Z>=y){const Le=S((Z-y)/F);C(Le,1-Le)}}return n})}let P=!1;return{start(){P||(P=!0,Jt(e),Yt(s)?(s=s(),El().then(d)):d())},invalidate(){P=!1},end(){n&&(_(),n=!1)}}}function Vl(e,t,l){let s=t(e,l),n=!0,i;const a=Re;a.r+=1;function g(){const{delay:_=0,duration:d=300,easing:P=Vt,tick:N=_t,css:F}=s||Nl;F&&(i=Dl(e,1,0,d,_,P,F));const S=vl()+_,C=S+d;nt(()=>Ot(e,!1,"start")),yl(K=>{if(n){if(K>=C)return N(0,1),Ot(e,!1,"end"),--a.r||Ve(a.c),!1;if(K>=S){const y=P((K-S)/d);N(1-y,y)}}return n})}return Yt(s)?El().then(()=>{s=s(),g()}):g(),{end(_){_&&s.tick&&s.tick(1,0),n&&(i&&Jt(e,i),n=!1)}}}function Yl(e,t,l,s){const{fragment:n,on_mount:i,on_destroy:a,after_update:g}=e.$$;n&&n.m(t,l),s||nt(()=>{const _=i.map(ml).filter(Yt);a?a.push(..._):Ve(_),e.$$.on_mount=[]}),g.forEach(nt)}function Gl(e,t){const l=e.$$;l.fragment!==null&&(Ve(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function Hl(e,t){e.$$.dirty[0]===-1&&(pt.push(e),jl(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ql(e,t,l,s,n,i,a,g=[-1]){const _=Ht;dt(e);const d=e.$$={fragment:null,ctx:null,props:i,update:_t,not_equal:n,bound:Wt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(_?_.$$.context:[])),callbacks:Wt(),dirty:g,skip_bound:!1,root:t.target||_.$$.root};a&&a(d.root);let P=!1;if(d.ctx=l?l(e,t.props||{},(N,F,...S)=>{const C=S.length?S[0]:F;return d.ctx&&n(d.ctx[N],d.ctx[N]=C)&&(!d.skip_bound&&d.bound[N]&&d.bound[N](C),P&&Hl(e,N)),F}):[],d.update(),P=!0,Ve(d.before_update),d.fragment=s?s(d.ctx):!1,t.target){if(t.hydrate){const N=Ol(t.target);d.fragment&&d.fragment.l(N),N.forEach(ke)}else d.fragment&&d.fragment.c();t.intro&&Pt(e.$$.fragment),Yl(e,t.target,t.anchor,t.customElement),Al()}dt(_)}class Wl{$destroy(){Gl(this,1),this.$destroy=_t}$on(t,l){const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(l),()=>{const n=s.indexOf(l);n!==-1&&s.splice(n,1)}}$set(t){this.$$set&&!Pl(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function $t(e,{delay:t=0,duration:l=400,easing:s=Vt}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:l,easing:s,css:i=>`opacity: ${i*n}`}}function el(e,t,l){const s=e.slice();return s[80]=t[l],s[82]=l,s}function tl(e,t,l){const s=e.slice();return s[83]=t[l],s[85]=l,s}function ll(e,t,l){const s=e.slice();return s[80]=t[l],s[82]=l,s}function sl(e,t,l){const s=e.slice();return s[87]=t[l],s}function nl(e,t,l){const s=e.slice();return s[90]=t[l],s[82]=l,s}function ol(e,t,l){const s=e.slice();return s[92]=t[l],s}function rl(e){let t,l=`${Ue-e[92]}px`,s=`${Rt-e[92]}px`;return{c(){t=p("div"),o(t,"class","panel_back svelte-2scaft"),E(t,"width",l,!1),E(t,"height",s,!1),E(t,"background",e[22][e[23][e[82]]],!1)},m(n,i){Me(n,t,i)},p(n,i){i[0]&65536&&l!==(l=`${Ue-n[92]}px`)&&E(t,"width",l,!1),i[0]&65536&&s!==(s=`${Rt-n[92]}px`)&&E(t,"height",s,!1)},d(n){n&&ke(t)}}}function il(e){let t,l,s,n=e[24][e[82]]+"",i,a,g=`${Ue+1}px`,_=`${Rt+1}px`,d=`${e[20][e[82]]*Rt}px`,P=`${e[21][e[82]]*Ue}px`,N,F,S=e[16][e[82]],C=[];for(let K=0;K<S.length;K+=1)C[K]=rl(ol(e,S,K));return{c(){t=p("div");for(let K=0;K<C.length;K+=1)C[K].c();l=A(),s=p("div"),i=L(n),a=A(),o(s,"class","svelte-2scaft"),o(t,"class","panel svelte-2scaft"),E(t,"width",g,!1),E(t,"height",_,!1),E(t,"top",d,!1),E(t,"left",P,!1),E(t,"background",e[18][e[82]],!1)},m(K,y){Me(K,t,y);for(let D=0;D<C.length;D+=1)C[D].m(t,null);r(t,l),r(t,s),r(s,i),r(t,a),N||(F=b(t,"click",e[31](e[82])),N=!0)},p(K,y){if(e=K,y[0]&12648448){S=e[16][e[82]];let D;for(D=0;D<S.length;D+=1){const Z=ol(e,S,D);C[D]?C[D].p(Z,y):(C[D]=rl(Z),C[D].c(),C[D].m(t,l))}for(;D<C.length;D+=1)C[D].d(1);C.length=S.length}y[0]&262144&&E(t,"background",e[18][e[82]],!1)},d(K){K&&ke(t),st(C,K),N=!1,F()}}}function al(e){let t,l=`${ze+1}px`,s=`${e[19]/e[1]*2+1}px`,n=`${e[87]*2}px`,i=`${e[82]*ze}px`,a,g;function _(){return e[54](e[87])}return{c(){t=p("div"),o(t,"class","grid svelte-2scaft"),E(t,"width",l,!1),E(t,"height",s,!1),E(t,"top",n,!1),E(t,"left",i,!1)},m(d,P){Me(d,t,P),a||(g=b(t,"click",_),a=!0)},p(d,P){e=d,P[0]&2&&s!==(s=`${e[19]/e[1]*2+1}px`)&&E(t,"height",s,!1),P[0]&32768&&n!==(n=`${e[87]*2}px`)&&E(t,"top",n,!1)},d(d){d&&ke(t),a=!1,g()}}}function cl(e){let t,l=e[15],s=[];for(let n=0;n<l.length;n+=1)s[n]=al(sl(e,l,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();t=wl()},m(n,i){for(let a=0;a<s.length;a+=1)s[a].m(n,i);Me(n,t,i)},p(n,i){if(i[0]&34111506){l=n[15];let a;for(a=0;a<l.length;a+=1){const g=sl(n,l,a);s[a]?s[a].p(g,i):(s[a]=al(g),s[a].c(),s[a].m(t.parentNode,t))}for(;a<s.length;a+=1)s[a].d(1);s.length=l.length}},d(n){st(s,n),n&&ke(t)}}}function fl(e){let t,l=`${e[11]*2}px`,s=`${ze*18}px`;return{c(){t=p("div"),o(t,"class","cursor_play svelte-2scaft"),E(t,"top",l,!1),E(t,"width",s,!1)},m(n,i){Me(n,t,i)},p(n,i){i[0]&2048&&l!==(l=`${n[11]*2}px`)&&E(t,"top",l,!1)},d(n){n&&ke(t)}}}function ul(e){let t,l=`${ze+1}px`,s=`${jt}px`,n=`${e[83]*2-jt/2}px`,i=`${e[82]*ze}px`;return{c(){t=p("div"),o(t,"class","note svelte-2scaft"),E(t,"width",l,!1),E(t,"height",s,!1),E(t,"top",n,!1),E(t,"left",i,!1),E(t,"background",e[22][e[23][e[82]]],!1)},m(a,g){Me(a,t,g)},p(a,g){g[0]&131072&&n!==(n=`${a[83]*2-jt/2}px`)&&E(t,"top",n,!1)},d(a){a&&ke(t)}}}function pl(e){let t,l=e[80],s=[];for(let n=0;n<l.length;n+=1)s[n]=ul(tl(e,l,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();t=wl()},m(n,i){for(let a=0;a<s.length;a+=1)s[a].m(n,i);Me(n,t,i)},p(n,i){if(i[0]&12713984){l=n[80];let a;for(a=0;a<l.length;a+=1){const g=tl(n,l,a);s[a]?s[a].p(g,i):(s[a]=ul(g),s[a].c(),s[a].m(t.parentNode,t))}for(;a<s.length;a+=1)s[a].d(1);s.length=l.length}},d(n){st(s,n),n&&ke(t)}}}function dl(e){let t,l,s,n,i,a,g;return{c(){t=p("div"),l=L(e[8]),o(t,"class","message svelte-2scaft"),E(t,"background",e[9],!1)},m(_,d){Me(_,t,d),r(t,l),i=!0,a||(g=b(t,"click",e[58]),a=!0)},p(_,d){(!i||d[0]&256)&&Je(l,_[8]),d[0]&512&&E(t,"background",_[9],!1)},i(_){i||(nt(()=>{n&&n.end(1),s=Ul(t,$t,{duration:100}),s.start()}),i=!0)},o(_){s&&s.invalidate(),n=Vl(t,$t,{duration:300}),i=!1},d(_){_&&ke(t),_&&n&&n.end(),a=!1,g()}}}function Xl(e){let t,l,s,n=e[4]+1+"",i,a,g=(e[0]-e[4]*192)/(e[19]/e[1])+1+"",_,d,P,N,F=Math.round(e[14])+"",S,C,K,y,D,Z,Le,Te,we,ne,B,Y,j,R,I,W,z,v,x,T,oe,Be,X,De,G,je,re,ge,ie,ve,H,Ae,$,Ye,_e,he,Ee,ht,M,Ge,be,ot,Ne,mt,me,gt,Ce,Pe,rt,q,Ie,He,Se,Qe=`${(e[0]-e[4]*e[19])*2}px`,zt=`${ze*18}px`,vt,Lt=`${e[19]*2+10}px`,bt,ae,yt,We=e[12].toFixed(2)+"",it,kt,ce,wt,Xe=e[13].toFixed(2)+"",at,Dt,fe,At,f,m,h,k,pe,Q,V,O,Et,de,ct,Fe,ft,Ke,ye,Ze,qe,ue,Tt,Qt,xe=e[2],ee=[];for(let c=0;c<xe.length;c+=1)ee[c]=il(nl(e,xe,c));let $e=e[17],te=[];for(let c=0;c<$e.length;c+=1)te[c]=cl(ll(e,$e,c));let le=e[11]>=0&&fl(e),et=e[17],se=[];for(let c=0;c<et.length;c+=1)se[c]=pl(el(e,et,c));let J=e[8]!==""&&dl(e);return{c(){t=p("main"),l=p("div"),s=p("div"),i=L(n),a=L("\u5C0F\u7BC0\u76EE, "),_=L(g),d=L("/"),P=L(e[1]),N=L(" ("),S=L(F),C=L("f)"),K=A(),y=p("div"),D=p("input"),Le=A(),Te=p("label"),Te.textContent="\u3053\u306E\u5C0F\u7BC0\u3067\u8A2D\u5B9A\u5909\u66F4",we=L(` |\r
      `),ne=p("label"),ne.textContent="\u958B\u59CB\u30D5\u30EC\u30FC\u30E0:",B=A(),Y=p("input"),j=A(),R=p("label"),R.textContent="BPM:",I=A(),W=p("input"),z=A(),v=p("div"),x=p("input"),T=A(),oe=p("input"),Be=A(),X=p("input"),De=A(),G=p("input"),je=A(),re=p("input"),ge=A(),ie=p("input"),ve=A(),H=p("input"),Ae=A(),$=p("input"),Ye=A(),_e=p("input"),he=A(),Ee=p("input"),ht=A(),M=p("input"),Ge=A(),be=p("input"),ot=A(),Ne=p("input"),mt=A(),me=p("input"),gt=A(),Ce=p("div"),Pe=p("div");for(let c=0;c<ee.length;c+=1)ee[c].c();rt=A(),q=p("div");for(let c=0;c<te.length;c+=1)te[c].c();Ie=A(),le&&le.c(),He=A(),Se=p("div"),vt=A();for(let c=0;c<se.length;c+=1)se[c].c();bt=A(),ae=p("div"),yt=L("\u97F3\u91CF("),it=L(We),kt=L(`)\r
      `),ce=p("input"),wt=L(`\r
      \u901F\u5EA6(`),at=L(Xe),Dt=L(`)\r
      `),fe=p("input"),At=A(),f=p("div"),f.textContent="\u753B\u9762\u306B\u30D5\u30A1\u30A4\u30EB\u3092\u30C9\u30ED\u30C3\u30D7\u3057\u3066\u30BB\u30FC\u30D6\u30C7\u30FC\u30BF/\u97F3\u697D\u30D5\u30A1\u30A4\u30EB\u3092\u8AAD\u307F\u8FBC\u307F",m=A(),h=p("div"),k=p("input"),pe=A(),Q=p("input"),V=A(),O=p("input"),Et=L(`\r
      \u8B5C\u9762\u756A\u53F7`),de=p("input"),ct=A(),Fe=p("div"),J&&J.c(),ft=A(),Ke=p("footer"),ye=p("a"),ye.textContent="\u4F7F\u7528\u3057\u3066\u3044\u308B\u30BD\u30D5\u30C8\u30A6\u30A7\u30A2\u306E\u30E9\u30A4\u30BB\u30F3\u30B9\u8868\u793A",Ze=L(` |\r
      `),qe=p("a"),qe.textContent=`Pun\u25C7Pane Editor Ver.${Cl}`,o(D,"type","checkbox"),D.checked=Z=e[6]===e[4],o(D,"id","fix"),o(Te,"for","fix"),o(Te,"class","svelte-2scaft"),o(ne,"for","begin_frame"),o(ne,"class","svelte-2scaft"),o(Y,"type","number"),Y.value=e[5],o(Y,"id","begin_frame"),o(Y,"class","svelte-2scaft"),o(R,"for","bpm"),o(R,"class","svelte-2scaft"),o(W,"type","number"),W.value=e[3],o(W,"step","0.01"),o(W,"min","0.01"),o(W,"id","bpm"),o(W,"class","svelte-2scaft"),o(y,"class","main_input svelte-2scaft"),o(x,"type","button"),x.value="4",o(x,"title","1\u30AD\u30FC: \u30AB\u30FC\u30BD\u30EB\u79FB\u52D5\u9593\u9694\u30924\u5206\u306B\u5909\u66F4"),o(x,"class","svelte-2scaft"),U(x,"selected",e[1]===4),o(oe,"type","button"),oe.value="8",o(oe,"title","2\u30AD\u30FC: \u30AB\u30FC\u30BD\u30EB\u79FB\u52D5\u9593\u9694\u30928\u5206\u306B\u5909\u66F4"),o(oe,"class","svelte-2scaft"),U(oe,"selected",e[1]===8),o(X,"type","button"),X.value="16",o(X,"title","3\u30AD\u30FC: \u30AB\u30FC\u30BD\u30EB\u79FB\u52D5\u9593\u9694\u309216\u5206\u306B\u5909\u66F4"),o(X,"class","svelte-2scaft"),U(X,"selected",e[1]===16),o(G,"type","button"),G.value="32",o(G,"title","R\u30AD\u30FC: \u30AB\u30FC\u30BD\u30EB\u79FB\u52D5\u9593\u9694\u309232\u5206\u306B\u5909\u66F4"),o(G,"class","svelte-2scaft"),U(G,"selected",e[1]===32),o(re,"type","button"),re.value="12",o(re,"title","4\u30AD\u30FC: \u30AB\u30FC\u30BD\u30EB\u79FB\u52D5\u9593\u9694\u309212\u5206(8\u52063\u9023)\u306B\u5909\u66F4"),o(re,"class","svelte-2scaft"),U(re,"selected",e[1]===12),o(ie,"type","button"),ie.value="24",o(ie,"title","5\u30AD\u30FC: \u30AB\u30FC\u30BD\u30EB\u79FB\u52D5\u9593\u9694\u309224\u5206(16\u52063\u9023)\u306B\u5909\u66F4"),o(ie,"class","svelte-2scaft"),U(ie,"selected",e[1]===24),o(H,"type","button"),H.value="48",o(H,"title","6\u30AD\u30FC: \u30AB\u30FC\u30BD\u30EB\u79FB\u52D5\u9593\u9694\u309248\u5206(32\u52063\u9023)\u306B\u5909\u66F4"),o(H,"class","svelte-2scaft"),U(H,"selected",e[1]===48),o($,"type","button"),$.value="\u2190",o($,"title","\u5DE6\u77E2\u5370\u30AD\u30FC: \u524D\u306E\u5C0F\u7BC0\u306B\u79FB\u52D5"),o($,"class","svelte-2scaft"),o(_e,"type","button"),_e.value="\u2191",o(_e,"title","\u4E0A\u77E2\u5370/E/B: \u30AB\u30FC\u30BD\u30EB\u3092\u4E0A\u306B\u79FB\u52D5"),o(_e,"class","svelte-2scaft"),o(Ee,"type","button"),Ee.value="\u2193",o(Ee,"title","\u4E0B\u77E2\u5370/D/\u30B9\u30DA\u30FC\u30B9: \u30AB\u30FC\u30BD\u30EB\u3092\u4E0B\u306B\u79FB\u52D5"),o(Ee,"class","svelte-2scaft"),o(M,"type","button"),M.value="\u2192",o(M,"title","\u53F3\u77E2\u5370\u30AD\u30FC: \u6B21\u306E\u5C0F\u7BC0\u306B\u79FB\u52D5"),o(M,"class","svelte-2scaft"),o(be,"type","button"),be.value="BS",o(be,"title","Backspace: \u30AB\u30FC\u30BD\u30EB\u3092\u524D\u306B\u79FB\u52D5\u3057\u3066\u30D1\u30CD\u30EB\u3092\u524A\u9664"),o(be,"class","svelte-2scaft"),o(Ne,"type","button"),Ne.value="DEL",o(Ne,"title","Delete: \u30AB\u30FC\u30BD\u30EB\u306E\u3042\u308B\u884C\u306E\u30D1\u30CD\u30EB\u3092\u524A\u9664"),o(Ne,"class","svelte-2scaft"),o(me,"type","button"),me.value="Enter",o(me,"title","Enter: \u66F2\u518D\u751F\u306E\u958B\u59CB/\u505C\u6B62"),o(me,"class","svelte-2scaft"),o(v,"class","main_buttons svelte-2scaft"),o(Pe,"class","panels svelte-2scaft"),o(Pe,"style",`left: ${ze*18+20}px; width: ${Ue*5}px;`),o(Se,"class","cursor svelte-2scaft"),E(Se,"top",Qe,!1),E(Se,"width",zt,!1),o(q,"class","notes svelte-2scaft"),o(Ce,"class","punpane_editor svelte-2scaft"),E(Ce,"height",Lt,!1),o(ce,"type","range"),o(ce,"min","0"),o(ce,"max","1"),o(ce,"step","0.01"),o(fe,"type","range"),o(fe,"min","0.1"),o(fe,"max","1.5"),o(fe,"step","0.1"),o(ae,"class","music_control svelte-2scaft"),o(f,"class","drop_area svelte-2scaft"),U(f,"dragover",e[10]),o(k,"type","button"),k.value="\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u304B\u3089\u8AAD\u307F\u8FBC\u307F",o(k,"class","svelte-2scaft"),o(Q,"type","button"),Q.value="\u30BB\u30FC\u30D6\u30C7\u30FC\u30BF\u306E\u4FDD\u5B58",o(Q,"class","svelte-2scaft"),o(O,"type","button"),O.value="dos\u306E\u4FDD\u5B58",o(O,"class","svelte-2scaft"),o(de,"type","number"),o(de,"min","1"),o(de,"class","svelte-2scaft"),o(h,"class","save_buttons svelte-2scaft"),o(Fe,"class","message_container svelte-2scaft"),o(ye,"href","./thirdparty_license.txt"),o(ye,"target","_blank"),o(ye,"rel","noopener noreferrer"),o(ye,"class","svelte-2scaft"),o(qe,"href","https://github.com/suzme/punpane-editor"),o(qe,"target","_blank"),o(qe,"rel","noopener noreferrer"),o(qe,"class","svelte-2scaft"),o(Ke,"class","svelte-2scaft"),o(l,"class","container svelte-2scaft"),U(l,"dragover",e[10]),E(l,"width",`${ze*18+20+Ue*5}px`,!1)},m(c,w){Me(c,t,w),r(t,l),r(l,s),r(s,i),r(s,a),r(s,_),r(s,d),r(s,P),r(s,N),r(s,S),r(s,C),r(l,K),r(l,y),r(y,D),r(y,Le),r(y,Te),r(y,we),r(y,ne),r(y,B),r(y,Y),r(y,j),r(y,R),r(y,I),r(y,W),r(l,z),r(l,v),r(v,x),r(v,T),r(v,oe),r(v,Be),r(v,X),r(v,De),r(v,G),r(v,je),r(v,re),r(v,ge),r(v,ie),r(v,ve),r(v,H),r(v,Ae),r(v,$),r(v,Ye),r(v,_e),r(v,he),r(v,Ee),r(v,ht),r(v,M),r(v,Ge),r(v,be),r(v,ot),r(v,Ne),r(v,mt),r(v,me),r(l,gt),r(l,Ce),r(Ce,Pe);for(let u=0;u<ee.length;u+=1)ee[u].m(Pe,null);r(Ce,rt),r(Ce,q);for(let u=0;u<te.length;u+=1)te[u].m(q,null);r(q,Ie),le&&le.m(q,null),r(q,He),r(q,Se),r(q,vt);for(let u=0;u<se.length;u+=1)se[u].m(q,null);r(l,bt),r(l,ae),r(ae,yt),r(ae,it),r(ae,kt),r(ae,ce),tt(ce,e[12]),r(ae,wt),r(ae,at),r(ae,Dt),r(ae,fe),tt(fe,e[13]),r(l,At),r(l,f),r(l,m),r(l,h),r(h,k),r(h,pe),r(h,Q),r(h,V),r(h,O),r(h,Et),r(h,de),tt(de,e[7]),r(l,ct),r(l,Fe),J&&J.m(Fe,null),r(l,ft),r(l,Ke),r(Ke,ye),r(Ke,Ze),r(Ke,qe),ue=!0,Tt||(Qt=[b(window,"beforeunload",e[48]),b(window,"keydown",e[46]),b(window,"wheel",e[47]),b(window,"drop",e[45]),b(window,"dragover",e[43]),b(window,"dragleave",e[44]),b(D,"change",e[40]),b(Y,"change",e[41]),b(W,"change",e[42]),b(x,"click",e[30](4)),b(oe,"click",e[30](8)),b(X,"click",e[30](16)),b(G,"click",e[30](32)),b(re,"click",e[30](12)),b(ie,"click",e[30](24)),b(H,"click",e[30](48)),b($,"click",e[28]),b(_e,"click",e[26]),b(Ee,"click",e[27]),b(M,"click",e[29]),b(be,"click",e[33]),b(Ne,"click",e[32]),b(me,"click",e[37]),b(ce,"change",e[55]),b(ce,"input",e[55]),b(ce,"input",e[38]),b(fe,"change",e[56]),b(fe,"input",e[56]),b(fe,"input",e[39]),b(k,"click",e[35]),b(Q,"click",e[34]),b(O,"click",e[36]),b(de,"input",e[57])],Tt=!0)},p(c,w){if((!ue||w[0]&16)&&n!==(n=c[4]+1+"")&&Je(i,n),(!ue||w[0]&19)&&g!==(g=(c[0]-c[4]*192)/(c[19]/c[1])+1+"")&&Je(_,g),(!ue||w[0]&2)&&Je(P,c[1]),(!ue||w[0]&16384)&&F!==(F=Math.round(c[14])+"")&&Je(S,F),(!ue||w[0]&80&&Z!==(Z=c[6]===c[4]))&&(D.checked=Z),(!ue||w[0]&32&&Y.value!==c[5])&&(Y.value=c[5]),(!ue||w[0]&8&&W.value!==c[3])&&(W.value=c[3]),w[0]&2&&U(x,"selected",c[1]===4),w[0]&2&&U(oe,"selected",c[1]===8),w[0]&2&&U(X,"selected",c[1]===16),w[0]&2&&U(G,"selected",c[1]===32),w[0]&2&&U(re,"selected",c[1]===12),w[0]&2&&U(ie,"selected",c[1]===24),w[0]&2&&U(H,"selected",c[1]===48),w[0]&32833540|w[1]&1){xe=c[2];let u;for(u=0;u<xe.length;u+=1){const Oe=nl(c,xe,u);ee[u]?ee[u].p(Oe,w):(ee[u]=il(Oe),ee[u].c(),ee[u].m(Pe,null))}for(;u<ee.length;u+=1)ee[u].d(1);ee.length=xe.length}if(w[0]&34242578){$e=c[17];let u;for(u=0;u<$e.length;u+=1){const Oe=ll(c,$e,u);te[u]?te[u].p(Oe,w):(te[u]=cl(Oe),te[u].c(),te[u].m(q,Ie))}for(;u<te.length;u+=1)te[u].d(1);te.length=$e.length}if(c[11]>=0?le?le.p(c,w):(le=fl(c),le.c(),le.m(q,He)):le&&(le.d(1),le=null),w[0]&17&&Qe!==(Qe=`${(c[0]-c[4]*c[19])*2}px`)&&E(Se,"top",Qe,!1),w[0]&12713984){et=c[17];let u;for(u=0;u<et.length;u+=1){const Oe=el(c,et,u);se[u]?se[u].p(Oe,w):(se[u]=pl(Oe),se[u].c(),se[u].m(q,null))}for(;u<se.length;u+=1)se[u].d(1);se.length=et.length}(!ue||w[0]&4096)&&We!==(We=c[12].toFixed(2)+"")&&Je(it,We),w[0]&4096&&tt(ce,c[12]),(!ue||w[0]&8192)&&Xe!==(Xe=c[13].toFixed(2)+"")&&Je(at,Xe),w[0]&8192&&tt(fe,c[13]),w[0]&1024&&U(f,"dragover",c[10]),w[0]&128&&Ct(de.value)!==c[7]&&tt(de,c[7]),c[8]!==""?J?(J.p(c,w),w[0]&256&&Pt(J,1)):(J=dl(c),J.c(),Pt(J,1),J.m(Fe,null)):J&&(ql(),xt(J,1,1,()=>{J=null}),Jl()),w[0]&1024&&U(l,"dragover",c[10])},i(c){ue||(Pt(J),ue=!0)},o(c){xt(J),ue=!1},d(c){c&&ke(t),st(ee,c),st(te,c),le&&le.d(),st(se,c),J&&J.d(),Tt=!1,Ve(Qt)}}}const Cl="20220709-1",_l=18,Ue=96,Rt=96,ze=20,jt=6,Zl=100,hl=0,It=200,qt=160;function xl(e,t,l){let s,n,i,a,g,_,d,P,N,F,S;const K=[0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,3],y=[0,1,2,3,4,.5,1.5,2.5,3.5,.5,1.5,2.5,3.5,0,1,2,3,4],D=["#cccccc","#9999ff","#99ffff","#ffff99","#ff9966","#ffffff"],Z=[1,2,5,3,4,1,2,3,4,1,2,3,4,1,2,5,3,4],Le="7890-UIOPJKL;NM<>/".split(""),Te="aa,ab,ac,ad,ae,ba,bb,bc,bd,ca,cb,cc,cd,da,db,dc,dd,de".split(","),we={success:"#99ccff",error:"#ffcccc"};let ne=1,B=0,Y=16,j=[0],R=[It],I=[qt],W=null,z="",v=we.success,x=!1,T=new Array(_l).fill([]),oe,Be=-1,X=1,De=1;const G=new AudioContext,je=G.createGain();je.connect(G.destination);let re,ge,ie=!1,ve=!1;const H=f=>{l(8,z=""),ve&&Math.floor(f/192)!==Math.floor(B/192)&&setTimeout(q,0),l(0,B=f)},Ae=()=>H(B-3*64/Y),$=()=>H(B+3*64/Y),Ye=()=>H((s-1)*192),_e=()=>H((s+1)*192),he=f=>()=>{l(8,z=""),l(1,Y=f),l(0,B=Math.floor(B/(192/f))*(192/f))},Ee=(f,m)=>{l(2,T[f]=[...T[f],m],T)},ht=(f,m)=>{l(2,T[f]=T[f].filter(h=>h!==m),T)},M=f=>()=>{l(8,z=""),T[f].includes(B)?ht(f,B):Ee(f,B),W===null&&(W=setTimeout(()=>{W=null,$()},Zl))},Ge=()=>{l(8,z=""),l(2,T=T.map(f=>f.filter(m=>m!==B)))},be=()=>{Ae(),Ge()},ot=(f,m="\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306B\u30B3\u30D4\u30FC\u3057\u307E\u3057\u305F\u3002")=>{navigator.clipboard?(navigator.clipboard.writeText(f),l(8,z=m),l(9,v=we.success)):prompt("\u30B3\u30D4\u30FC\u3057\u3066\u4FDD\u5B58\u3057\u3066\u304F\u3060\u3055\u3044\u3002",f)},Ne=()=>JSON.stringify({panels:T,label_measures:j,begin_frames:R,bpms:I,resolution:192,chart_num:ne,editor_version:Cl,save_data_version:0}),mt=()=>ot(Ne(),"\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306B\u30BB\u30FC\u30D6\u30C7\u30FC\u30BF\u3092\u30B3\u30D4\u30FC\u3057\u307E\u3057\u305F\u3002"),me=f=>{var h,k,pe,Q;let m;if(confirm("\u30BB\u30FC\u30D6\u30C7\u30FC\u30BF\u3092\u8AAD\u307F\u8FBC\u3080\u3068\u73FE\u5728\u7DE8\u96C6\u4E2D\u306E\u30C7\u30FC\u30BF\u306F\u5931\u308F\u308C\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F")!==!1){try{m=JSON.parse(f)}catch(V){console.log(V),l(8,z="\u30BB\u30FC\u30D6\u30C7\u30FC\u30BF\u306E\u8AAD\u307F\u8FBC\u307F\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002"),l(9,v=we.error);return}l(2,T=(h=m.panels)!=null?h:new Array(_l).fill([])),l(49,j=(k=m.label_measures)!=null?k:[]),l(50,R=(pe=m.begin_frames)!=null?pe:[]),l(51,I=(Q=m.bpms)!=null?Q:[]),l(7,ne=m.chart_num)}},gt=()=>{if(navigator.clipboard)navigator.clipboard.readText().then(f=>me(f));else{const f=prompt("\u30BB\u30FC\u30D6\u30C7\u30FC\u30BF\u3092\u8CBC\u308A\u4ED8\u3051\u3066\u304F\u3060\u3055\u3044\u3002");f&&f!==""&&me(f)}},Ce=()=>T.map((f,m)=>`|${Te[m]}${ne!==1?ne:""}_data=`+[...f.map(h=>{var de,ct,Fe,ft,Ke,ye;const k=Math.floor(h/192),pe=Math.max(...j.filter(Ze=>k>=Ze)),Q=j.findIndex(Ze=>Ze===pe),V=(ct=(de=j[Q])!=null?de:j[0])!=null?ct:hl,O=(ft=(Fe=R[Q])!=null?Fe:R[0])!=null?ft:It,Et=(ye=(Ke=I[Q])!=null?Ke:I[0])!=null?ye:qt;return Math.round((h-V*192)/192*4*60*60/Et+O)})].sort().join(",")).join("")+"|",Pe=()=>ot(Ce(),"\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306Bdos\u3092\u30B3\u30D4\u30FC\u3057\u307E\u3057\u305F\u3002"),rt=()=>{!ve||(l(11,Be=((G.currentTime-oe)*_*De/60/4-.5)*192),Be>192&&(Ie(),q()),requestAnimationFrame(rt))},q=()=>{if(ve&&Ie(),ie){const m=((s-a-.5)*4*60*60/_+g-200)/60,h=m<0?-m:0;je.gain.value=X,ge=G.createBufferSource(),ge.buffer=re,ge.playbackRate.value=De,ge.connect(je),oe=G.currentTime+h,ge.start(oe+h,Math.max(m,0)),requestAnimationFrame(rt),ve=!0}else re?l(8,z="\u518D\u751F\u6E96\u5099\u304C\u672A\u5B8C\u4E86\u3067\u3059\u3002"):l(8,z="\u97F3\u697D\u30D5\u30A1\u30A4\u30EB\u304C\u5165\u529B\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002"),l(9,v=we.error)},Ie=()=>{ge.stop(),l(11,Be=-1),ve=!1},He=()=>{ve?Ie():q()},Se=()=>{je.gain.value=X},Qe=()=>{ge.playbackRate.value=De,ve&&q()},zt=f=>{if(l(8,z=""),f.target.checked)l(49,j=[...j,s]),l(50,R=[...R,Math.round(d)]),l(51,I=[...I,_]);else{const m=i;l(49,j=j.filter((h,k)=>m!==k)),l(50,R=R.filter((h,k)=>m!==k)),l(51,I=I.filter((h,k)=>m!==k))}},vt=f=>{l(8,z="");const m=f.target.value;let h;try{h=parseFloat(m)}catch(k){console.log(k),k.target.value=R[i];return}Number.isNaN(h)?f.target.value=R[i]:l(50,R[i]=h,R)},Lt=f=>{l(8,z="");const m=f.target.value;let h;try{h=parseFloat(m)}catch(k){console.log(k),k.target.value=I[i];return}Number.isNaN(h)||h<=0?f.target.value=I[i]:l(51,I[i]=h,I)},bt=f=>{f.preventDefault(),l(10,x=!0),l(8,z="")},ae=f=>{f.preventDefault(),l(10,x=!1),l(8,z="")},yt=f=>{if(f.stopPropagation(),f.preventDefault(),l(10,x=!1),l(8,z=""),!f.dataTransfer||!f.dataTransfer.files)return;const m=f.dataTransfer.files;if(m.length===0)return;const h=m[0];if(h.type.match(/^audio/)){ie=!1;const k=new FileReader;k.onload=()=>{G.decodeAudioData(k.result,pe=>{re=pe,l(8,z="\u97F3\u697D\u30D5\u30A1\u30A4\u30EB\u306E\u8AAD\u307F\u8FBC\u307F\u304C\u5B8C\u4E86\u3057\u307E\u3057\u305F\u3002"),l(9,v=we.success),ie=!0})},k.readAsArrayBuffer(h)}else if(h.type==="text/plain"){const k=new FileReader;k.onload=()=>{me(k.result)},k.readAsText(h)}else l(8,z="\u975E\u5BFE\u5FDC\u306E\u30D5\u30A1\u30A4\u30EB\u30BF\u30A4\u30D7\u3067\u3059("+h.type+")"),l(9,v=we.error)},We={ArrowUp:Ae,ArrowDown:$,ArrowLeft:Ye,ArrowRight:_e,KeyE:Ae,KeyD:$,KeyS:Ye,KeyF:_e,KeyB:Ae,Space:$,Digit1:he(4),Digit2:he(8),Digit3:he(16),Digit4:he(12),Digit5:he(24),Digit6:he(48),KeyR:he(32),Digit7:M(0),Digit8:M(1),Digit9:M(2),Digit0:M(3),Minus:M(4),KeyU:M(5),KeyI:M(6),KeyO:M(7),KeyP:M(8),KeyJ:M(9),KeyK:M(10),KeyL:M(11),Semicolon:M(12),KeyN:M(13),KeyM:M(14),Comma:M(15),Period:M(16),Slash:M(17),Delete:Ge,Backspace:be,Enter:He},it={},kt=f=>{if(f.target.type!=="number"){const m=f.ctrlKey?it:We;m[f.code]&&(m[f.code](),f.preventDefault())}},ce=f=>{f.deltaY>0?$():f.deltaY<0&&Ae()},wt=f=>{f.preventDefault(),f.returnValue="\u30DA\u30FC\u30B8\u3092\u79FB\u52D5\u3057\u3066\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F\u73FE\u5728\u7DE8\u96C6\u4E2D\u306E\u30C7\u30FC\u30BF\u306F\u5931\u308F\u308C\u307E\u3059\u3002"},Xe=f=>H(s*192+f);function at(){X=Ct(this.value),l(12,X)}function Dt(){De=Ct(this.value),l(13,De)}function fe(){ne=Ct(this.value),l(7,ne)}const At=()=>l(8,z="");return e.$$.update=()=>{var f,m,h,k,pe,Q;e.$$.dirty[0]&1&&l(4,s=Math.floor(B/192)),e.$$.dirty[0]&16|e.$$.dirty[1]&262144&&l(53,n=Math.max(...j.filter(V=>s>=V))),e.$$.dirty[1]&4456448&&l(52,i=j.findIndex(V=>V===n)),e.$$.dirty[1]&2359296&&l(6,a=(m=(f=j[i])!=null?f:j[0])!=null?m:hl),e.$$.dirty[1]&2621440&&l(5,g=(k=(h=R[i])!=null?h:R[0])!=null?k:It),e.$$.dirty[1]&3145728&&l(3,_=(Q=(pe=I[i])!=null?pe:I[0])!=null?Q:qt),e.$$.dirty[0]&105&&l(14,d=(B-a*192)/192*4*60*60/_+g),e.$$.dirty[0]&5&&l(18,P=T.map((V,O)=>V.includes(B)?D[Z[O]]:D[0])),e.$$.dirty[0]&20&&l(17,N=T.map(V=>V.map(O=>O-s*192).filter(O=>O>=0&&O<192))),e.$$.dirty[0]&5&&l(16,F=T.map(V=>V.map(O=>B-O).filter(O=>O>0&&O<=Ue))),e.$$.dirty[0]&2&&l(15,S=new Array(Y).fill(0).map((V,O)=>192/Y*O))},[B,Y,T,_,s,g,a,ne,z,v,x,Be,X,De,d,S,F,N,P,192,K,y,D,Z,Le,H,Ae,$,Ye,_e,he,M,Ge,be,mt,gt,Pe,He,Se,Qe,zt,vt,Lt,bt,ae,yt,kt,ce,wt,j,R,I,i,n,Xe,at,Dt,fe,At]}class $l extends Wl{constructor(t){super(),Ql(this,t,xl,Xl,Ml,{},null,[-1,-1,-1,-1])}}new $l({target:document.getElementById("app")});
